{"dependencies":[{"name":"../auth/supabaseClient","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":156},"end":{"line":5,"column":69,"index":225}}],"key":"N6WSRy60K8929CSDB5Gy6caq2pI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.checkBucketAccess = checkBucketAccess;\n  exports.uploadShard = uploadShard;\n  exports.uploadAllShards = uploadAllShards;\n  exports.downloadShard = downloadShard;\n  exports.downloadAllShards = downloadAllShards;\n  exports.cleanupShards = cleanupShards;\n  exports.deleteDocumentShards = deleteDocumentShards;\n  var _authSupabaseClient = require(_dependencyMap[0], \"../auth/supabaseClient\");\n  // Cloud Storage Service - Zero Knowledge Vault\n  // Uploads ONLY encrypted shards with random UUID filenames\n  // Server sees meaningless blobs - no metadata\n\n  /**\n   * Check if storage bucket exists and is accessible\n   */\n  async function checkBucketAccess() {\n    try {\n      const supabase = (0, _authSupabaseClient.getSupabase)();\n      const {\n        data,\n        error\n      } = await supabase.storage.getBucket(_authSupabaseClient.STORAGE_BUCKET);\n      if (error) {\n        console.error('Bucket access error:', error);\n        return {\n          success: false,\n          error: `Storage bucket \"${_authSupabaseClient.STORAGE_BUCKET}\" not found or not accessible. Please create it in Supabase Dashboard → Storage.`\n        };\n      }\n      console.log('Bucket access OK:', data);\n      return {\n        success: true\n      };\n    } catch (error) {\n      console.error('Bucket check exception:', error);\n      return {\n        success: false,\n        error: error.message\n      };\n    }\n  }\n\n  /**\n   * Upload a single shard to Supabase Storage\n   * Filename is the random UUID - no relation to original file\n   */\n  async function uploadShard(shard, userId) {\n    try {\n      const supabase = (0, _authSupabaseClient.getSupabase)();\n\n      // Path: userId/shardUUID (user folder for RLS)\n      const filePath = `${userId}/${shard.id}`;\n      console.log(`Uploading shard ${shard.id} to ${filePath}, data length: ${shard.data.length}`);\n\n      // Convert string to ArrayBuffer for upload\n      const encoder = new TextEncoder();\n      const uint8Array = encoder.encode(shard.data);\n      const {\n        data,\n        error\n      } = await supabase.storage.from(_authSupabaseClient.STORAGE_BUCKET).upload(filePath, uint8Array, {\n        contentType: 'application/octet-stream',\n        upsert: true\n      });\n      if (error) {\n        console.error('Shard upload error:', JSON.stringify(error));\n\n        // Provide more specific error messages\n        if (error.message.includes('Bucket not found')) {\n          return {\n            success: false,\n            error: `Storage bucket \"${_authSupabaseClient.STORAGE_BUCKET}\" does not exist. Create it in Supabase Dashboard → Storage.`\n          };\n        }\n        if (error.message.includes('row-level security') || error.message.includes('policy')) {\n          return {\n            success: false,\n            error: 'Storage policy error. Please add INSERT policy for the bucket in Supabase.'\n          };\n        }\n        if (error.message.includes('Invalid JWT') || error.message.includes('not authenticated')) {\n          return {\n            success: false,\n            error: 'Authentication error. Please sign out and sign in again.'\n          };\n        }\n        return {\n          success: false,\n          error: error.message\n        };\n      }\n      console.log(`Shard ${shard.id} uploaded successfully:`, data);\n      return {\n        success: true,\n        shardId: shard.id\n      };\n    } catch (error) {\n      console.error('Shard upload exception:', error);\n      return {\n        success: false,\n        error: error.message || 'Upload failed'\n      };\n    }\n  }\n\n  /**\n   * Upload all shards for a document\n   */\n  async function uploadAllShards(shards, userId, onProgress) {\n    // First check if bucket is accessible\n    const bucketCheck = await checkBucketAccess();\n    if (!bucketCheck.success) {\n      return {\n        success: false,\n        error: bucketCheck.error\n      };\n    }\n    const shardIds = [];\n    console.log(`Starting upload of ${shards.length} shards for user ${userId}`);\n    for (let i = 0; i < shards.length; i++) {\n      const result = await uploadShard(shards[i], userId);\n      if (!result.success) {\n        console.error(`Failed at shard ${i + 1}, cleaning up...`);\n        await cleanupShards(shardIds, userId);\n        return {\n          success: false,\n          error: `Shard ${i + 1}/${shards.length} failed: ${result.error}`\n        };\n      }\n      shardIds.push(result.shardId);\n      onProgress?.(i + 1, shards.length);\n    }\n    console.log('All shards uploaded successfully:', shardIds);\n    return {\n      success: true,\n      shardIds\n    };\n  }\n\n  /**\n   * Download a shard from Supabase Storage\n   */\n  async function downloadShard(shardId, userId) {\n    try {\n      const supabase = (0, _authSupabaseClient.getSupabase)();\n      const filePath = `${userId}/${shardId}`;\n      console.log(`Downloading shard from ${filePath}`);\n      const {\n        data,\n        error\n      } = await supabase.storage.from(_authSupabaseClient.STORAGE_BUCKET).download(filePath);\n      if (error) {\n        console.error('Shard download error:', error);\n        return {\n          success: false,\n          error: error.message\n        };\n      }\n      if (!data) {\n        return {\n          success: false,\n          error: 'No data received'\n        };\n      }\n\n      // Convert blob to string\n      const text = await data.text();\n      console.log(`Shard ${shardId} downloaded, size: ${text.length}`);\n      return {\n        success: true,\n        data: text\n      };\n    } catch (error) {\n      console.error('Shard download exception:', error);\n      return {\n        success: false,\n        error: error.message || 'Download failed'\n      };\n    }\n  }\n\n  /**\n   * Download all shards for a document\n   */\n  async function downloadAllShards(shardIds, indices, userId, onProgress) {\n    const shards = [];\n    console.log(`Starting download of ${shardIds.length} shards`);\n    for (let i = 0; i < shardIds.length; i++) {\n      const result = await downloadShard(shardIds[i], userId);\n      if (!result.success) {\n        return {\n          success: false,\n          error: `Failed to download shard ${i + 1}: ${result.error}`\n        };\n      }\n      shards.push({\n        id: shardIds[i],\n        data: result.data,\n        index: indices[i]\n      });\n      onProgress?.(i + 1, shardIds.length);\n    }\n    console.log('All shards downloaded successfully');\n    return {\n      success: true,\n      shards\n    };\n  }\n\n  /**\n   * Delete shards from storage\n   */\n  async function cleanupShards(shardIds, userId) {\n    try {\n      const supabase = (0, _authSupabaseClient.getSupabase)();\n      const filePaths = shardIds.map(id => `${userId}/${id}`);\n      await supabase.storage.from(_authSupabaseClient.STORAGE_BUCKET).remove(filePaths);\n    } catch (error) {\n      console.error('Failed to cleanup shards:', error);\n    }\n  }\n\n  /**\n   * Delete a document's shards\n   */\n  async function deleteDocumentShards(shardIds, userId) {\n    try {\n      const supabase = (0, _authSupabaseClient.getSupabase)();\n      const filePaths = shardIds.map(id => `${userId}/${id}`);\n      const {\n        error\n      } = await supabase.storage.from(_authSupabaseClient.STORAGE_BUCKET).remove(filePaths);\n      if (error) {\n        return {\n          success: false,\n          error: error.message\n        };\n      }\n      return {\n        success: true\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: error.message || 'Delete failed'\n      };\n    }\n  }\n});","lineCount":255,"map":[[7,2,17,0,"exports"],[7,9,17,0],[7,10,17,0,"checkBucketAccess"],[7,27,17,0],[7,30,17,0,"checkBucketAccess"],[7,47,17,0],[8,2,42,0,"exports"],[8,9,42,0],[8,10,42,0,"uploadShard"],[8,21,42,0],[8,24,42,0,"uploadShard"],[8,35,42,0],[9,2,102,0,"exports"],[9,9,102,0],[9,10,102,0,"uploadAllShards"],[9,25,102,0],[9,28,102,0,"uploadAllShards"],[9,43,102,0],[10,2,137,0,"exports"],[10,9,137,0],[10,10,137,0,"downloadShard"],[10,23,137,0],[10,26,137,0,"downloadShard"],[10,39,137,0],[11,2,174,0,"exports"],[11,9,174,0],[11,10,174,0,"downloadAllShards"],[11,27,174,0],[11,30,174,0,"downloadAllShards"],[11,47,174,0],[12,2,207,0,"exports"],[12,9,207,0],[12,10,207,0,"cleanupShards"],[12,23,207,0],[12,26,207,0,"cleanupShards"],[12,39,207,0],[13,2,223,0,"exports"],[13,9,223,0],[13,10,223,0,"deleteDocumentShards"],[13,30,223,0],[13,33,223,0,"deleteDocumentShards"],[13,53,223,0],[14,2,5,0],[14,6,5,0,"_authSupabaseClient"],[14,25,5,0],[14,28,5,0,"require"],[14,35,5,0],[14,36,5,0,"_dependencyMap"],[14,50,5,0],[15,2,1,0],[16,2,2,0],[17,2,3,0],[19,2,14,0],[20,0,15,0],[21,0,16,0],[22,2,17,7],[22,17,17,22,"checkBucketAccess"],[22,34,17,39,"checkBucketAccess"],[22,35,17,39],[22,37,17,89],[23,4,18,2],[23,8,18,6],[24,6,19,4],[24,12,19,10,"supabase"],[24,20,19,18],[24,23,19,21],[24,27,19,21,"getSupabase"],[24,46,19,32],[24,47,19,32,"getSupabase"],[24,58,19,32],[24,60,19,33],[24,61,19,34],[25,6,20,4],[25,12,20,10],[26,8,20,12,"data"],[26,12,20,16],[27,8,20,18,"error"],[28,6,20,24],[28,7,20,25],[28,10,20,28],[28,16,20,34,"supabase"],[28,24,20,42],[28,25,20,43,"storage"],[28,32,20,50],[28,33,20,51,"getBucket"],[28,42,20,60],[28,43,20,61,"STORAGE_BUCKET"],[28,62,20,75],[28,63,20,75,"STORAGE_BUCKET"],[28,77,20,75],[28,78,20,76],[29,6,22,4],[29,10,22,8,"error"],[29,15,22,13],[29,17,22,15],[30,8,23,6,"console"],[30,15,23,13],[30,16,23,14,"error"],[30,21,23,19],[30,22,23,20],[30,44,23,42],[30,46,23,44,"error"],[30,51,23,49],[30,52,23,50],[31,8,24,6],[31,15,24,13],[32,10,25,8,"success"],[32,17,25,15],[32,19,25,17],[32,24,25,22],[33,10,26,8,"error"],[33,15,26,13],[33,17,26,15],[33,36,26,34,"STORAGE_BUCKET"],[33,55,26,48],[33,56,26,48,"STORAGE_BUCKET"],[33,70,26,48],[34,8,27,6],[34,9,27,7],[35,6,28,4],[36,6,30,4,"console"],[36,13,30,11],[36,14,30,12,"log"],[36,17,30,15],[36,18,30,16],[36,37,30,35],[36,39,30,37,"data"],[36,43,30,41],[36,44,30,42],[37,6,31,4],[37,13,31,11],[38,8,31,13,"success"],[38,15,31,20],[38,17,31,22],[39,6,31,27],[39,7,31,28],[40,4,32,2],[40,5,32,3],[40,6,32,4],[40,13,32,11,"error"],[40,18,32,21],[40,20,32,23],[41,6,33,4,"console"],[41,13,33,11],[41,14,33,12,"error"],[41,19,33,17],[41,20,33,18],[41,45,33,43],[41,47,33,45,"error"],[41,52,33,50],[41,53,33,51],[42,6,34,4],[42,13,34,11],[43,8,34,13,"success"],[43,15,34,20],[43,17,34,22],[43,22,34,27],[44,8,34,29,"error"],[44,13,34,34],[44,15,34,36,"error"],[44,20,34,41],[44,21,34,42,"message"],[45,6,34,50],[45,7,34,51],[46,4,35,2],[47,2,36,0],[49,2,38,0],[50,0,39,0],[51,0,40,0],[52,0,41,0],[53,2,42,7],[53,17,42,22,"uploadShard"],[53,28,42,33,"uploadShard"],[53,29,43,2,"shard"],[53,34,43,14],[53,36,44,2,"userId"],[53,42,44,16],[53,44,45,25],[54,4,46,2],[54,8,46,6],[55,6,47,4],[55,12,47,10,"supabase"],[55,20,47,18],[55,23,47,21],[55,27,47,21,"getSupabase"],[55,46,47,32],[55,47,47,32,"getSupabase"],[55,58,47,32],[55,60,47,33],[55,61,47,34],[57,6,49,4],[58,6,50,4],[58,12,50,10,"filePath"],[58,20,50,18],[58,23,50,21],[58,26,50,24,"userId"],[58,32,50,30],[58,36,50,34,"shard"],[58,41,50,39],[58,42,50,40,"id"],[58,44,50,42],[58,46,50,44],[59,6,52,4,"console"],[59,13,52,11],[59,14,52,12,"log"],[59,17,52,15],[59,18,52,16],[59,37,52,35,"shard"],[59,42,52,40],[59,43,52,41,"id"],[59,45,52,43],[59,52,52,50,"filePath"],[59,60,52,58],[59,78,52,76,"shard"],[59,83,52,81],[59,84,52,82,"data"],[59,88,52,86],[59,89,52,87,"length"],[59,95,52,93],[59,97,52,95],[59,98,52,96],[61,6,54,4],[62,6,55,4],[62,12,55,10,"encoder"],[62,19,55,17],[62,22,55,20],[62,26,55,24,"TextEncoder"],[62,37,55,35],[62,38,55,36],[62,39,55,37],[63,6,56,4],[63,12,56,10,"uint8Array"],[63,22,56,20],[63,25,56,23,"encoder"],[63,32,56,30],[63,33,56,31,"encode"],[63,39,56,37],[63,40,56,38,"shard"],[63,45,56,43],[63,46,56,44,"data"],[63,50,56,48],[63,51,56,49],[64,6,58,4],[64,12,58,10],[65,8,58,12,"data"],[65,12,58,16],[66,8,58,18,"error"],[67,6,58,24],[67,7,58,25],[67,10,58,28],[67,16,58,34,"supabase"],[67,24,58,42],[67,25,58,43,"storage"],[67,32,58,50],[67,33,59,7,"from"],[67,37,59,11],[67,38,59,12,"STORAGE_BUCKET"],[67,57,59,26],[67,58,59,26,"STORAGE_BUCKET"],[67,72,59,26],[67,73,59,27],[67,74,60,7,"upload"],[67,80,60,13],[67,81,60,14,"filePath"],[67,89,60,22],[67,91,60,24,"uint8Array"],[67,101,60,34],[67,103,60,36],[68,8,61,8,"contentType"],[68,19,61,19],[68,21,61,21],[68,47,61,47],[69,8,62,8,"upsert"],[69,14,62,14],[69,16,62,16],[70,6,63,6],[70,7,63,7],[70,8,63,8],[71,6,65,4],[71,10,65,8,"error"],[71,15,65,13],[71,17,65,15],[72,8,66,6,"console"],[72,15,66,13],[72,16,66,14,"error"],[72,21,66,19],[72,22,66,20],[72,43,66,41],[72,45,66,43,"JSON"],[72,49,66,47],[72,50,66,48,"stringify"],[72,59,66,57],[72,60,66,58,"error"],[72,65,66,63],[72,66,66,64],[72,67,66,65],[74,8,68,6],[75,8,69,6],[75,12,69,10,"error"],[75,17,69,15],[75,18,69,16,"message"],[75,25,69,23],[75,26,69,24,"includes"],[75,34,69,32],[75,35,69,33],[75,53,69,51],[75,54,69,52],[75,56,69,54],[76,10,70,8],[76,17,70,15],[77,12,71,10,"success"],[77,19,71,17],[77,21,71,19],[77,26,71,24],[78,12,72,10,"error"],[78,17,72,15],[78,19,72,17],[78,38,72,36,"STORAGE_BUCKET"],[78,57,72,50],[78,58,72,50,"STORAGE_BUCKET"],[78,72,72,50],[79,10,73,8],[79,11,73,9],[80,8,74,6],[81,8,75,6],[81,12,75,10,"error"],[81,17,75,15],[81,18,75,16,"message"],[81,25,75,23],[81,26,75,24,"includes"],[81,34,75,32],[81,35,75,33],[81,55,75,53],[81,56,75,54],[81,60,75,58,"error"],[81,65,75,63],[81,66,75,64,"message"],[81,73,75,71],[81,74,75,72,"includes"],[81,82,75,80],[81,83,75,81],[81,91,75,89],[81,92,75,90],[81,94,75,92],[82,10,76,8],[82,17,76,15],[83,12,77,10,"success"],[83,19,77,17],[83,21,77,19],[83,26,77,24],[84,12,78,10,"error"],[84,17,78,15],[84,19,78,17],[85,10,79,8],[85,11,79,9],[86,8,80,6],[87,8,81,6],[87,12,81,10,"error"],[87,17,81,15],[87,18,81,16,"message"],[87,25,81,23],[87,26,81,24,"includes"],[87,34,81,32],[87,35,81,33],[87,48,81,46],[87,49,81,47],[87,53,81,51,"error"],[87,58,81,56],[87,59,81,57,"message"],[87,66,81,64],[87,67,81,65,"includes"],[87,75,81,73],[87,76,81,74],[87,95,81,93],[87,96,81,94],[87,98,81,96],[88,10,82,8],[88,17,82,15],[89,12,83,10,"success"],[89,19,83,17],[89,21,83,19],[89,26,83,24],[90,12,84,10,"error"],[90,17,84,15],[90,19,84,17],[91,10,85,8],[91,11,85,9],[92,8,86,6],[93,8,88,6],[93,15,88,13],[94,10,88,15,"success"],[94,17,88,22],[94,19,88,24],[94,24,88,29],[95,10,88,31,"error"],[95,15,88,36],[95,17,88,38,"error"],[95,22,88,43],[95,23,88,44,"message"],[96,8,88,52],[96,9,88,53],[97,6,89,4],[98,6,91,4,"console"],[98,13,91,11],[98,14,91,12,"log"],[98,17,91,15],[98,18,91,16],[98,27,91,25,"shard"],[98,32,91,30],[98,33,91,31,"id"],[98,35,91,33],[98,60,91,58],[98,62,91,60,"data"],[98,66,91,64],[98,67,91,65],[99,6,92,4],[99,13,92,11],[100,8,92,13,"success"],[100,15,92,20],[100,17,92,22],[100,21,92,26],[101,8,92,28,"shardId"],[101,15,92,35],[101,17,92,37,"shard"],[101,22,92,42],[101,23,92,43,"id"],[102,6,92,46],[102,7,92,47],[103,4,93,2],[103,5,93,3],[103,6,93,4],[103,13,93,11,"error"],[103,18,93,21],[103,20,93,23],[104,6,94,4,"console"],[104,13,94,11],[104,14,94,12,"error"],[104,19,94,17],[104,20,94,18],[104,45,94,43],[104,47,94,45,"error"],[104,52,94,50],[104,53,94,51],[105,6,95,4],[105,13,95,11],[106,8,95,13,"success"],[106,15,95,20],[106,17,95,22],[106,22,95,27],[107,8,95,29,"error"],[107,13,95,34],[107,15,95,36,"error"],[107,20,95,41],[107,21,95,42,"message"],[107,28,95,49],[107,32,95,53],[108,6,95,69],[108,7,95,70],[109,4,96,2],[110,2,97,0],[112,2,99,0],[113,0,100,0],[114,0,101,0],[115,2,102,7],[115,17,102,22,"uploadAllShards"],[115,32,102,37,"uploadAllShards"],[115,33,103,2,"shards"],[115,39,103,17],[115,41,104,2,"userId"],[115,47,104,16],[115,49,105,2,"onProgress"],[115,59,105,55],[115,61,106,70],[116,4,107,2],[117,4,108,2],[117,10,108,8,"bucketCheck"],[117,21,108,19],[117,24,108,22],[117,30,108,28,"checkBucketAccess"],[117,47,108,45],[117,48,108,46],[117,49,108,47],[118,4,109,2],[118,8,109,6],[118,9,109,7,"bucketCheck"],[118,20,109,18],[118,21,109,19,"success"],[118,28,109,26],[118,30,109,28],[119,6,110,4],[119,13,110,11],[120,8,110,13,"success"],[120,15,110,20],[120,17,110,22],[120,22,110,27],[121,8,110,29,"error"],[121,13,110,34],[121,15,110,36,"bucketCheck"],[121,26,110,47],[121,27,110,48,"error"],[122,6,110,54],[122,7,110,55],[123,4,111,2],[124,4,113,2],[124,10,113,8,"shardIds"],[124,18,113,26],[124,21,113,29],[124,23,113,31],[125,4,115,2,"console"],[125,11,115,9],[125,12,115,10,"log"],[125,15,115,13],[125,16,115,14],[125,38,115,36,"shards"],[125,44,115,42],[125,45,115,43,"length"],[125,51,115,49],[125,71,115,69,"userId"],[125,77,115,75],[125,79,115,77],[125,80,115,78],[126,4,117,2],[126,9,117,7],[126,13,117,11,"i"],[126,14,117,12],[126,17,117,15],[126,18,117,16],[126,20,117,18,"i"],[126,21,117,19],[126,24,117,22,"shards"],[126,30,117,28],[126,31,117,29,"length"],[126,37,117,35],[126,39,117,37,"i"],[126,40,117,38],[126,42,117,40],[126,44,117,42],[127,6,118,4],[127,12,118,10,"result"],[127,18,118,16],[127,21,118,19],[127,27,118,25,"uploadShard"],[127,38,118,36],[127,39,118,37,"shards"],[127,45,118,43],[127,46,118,44,"i"],[127,47,118,45],[127,48,118,46],[127,50,118,48,"userId"],[127,56,118,54],[127,57,118,55],[128,6,120,4],[128,10,120,8],[128,11,120,9,"result"],[128,17,120,15],[128,18,120,16,"success"],[128,25,120,23],[128,27,120,25],[129,8,121,6,"console"],[129,15,121,13],[129,16,121,14,"error"],[129,21,121,19],[129,22,121,20],[129,41,121,39,"i"],[129,42,121,40],[129,45,121,43],[129,46,121,44],[129,64,121,62],[129,65,121,63],[130,8,122,6],[130,14,122,12,"cleanupShards"],[130,27,122,25],[130,28,122,26,"shardIds"],[130,36,122,34],[130,38,122,36,"userId"],[130,44,122,42],[130,45,122,43],[131,8,123,6],[131,15,123,13],[132,10,123,15,"success"],[132,17,123,22],[132,19,123,24],[132,24,123,29],[133,10,123,31,"error"],[133,15,123,36],[133,17,123,38],[133,26,123,47,"i"],[133,27,123,48],[133,30,123,51],[133,31,123,52],[133,35,123,56,"shards"],[133,41,123,62],[133,42,123,63,"length"],[133,48,123,69],[133,60,123,81,"result"],[133,66,123,87],[133,67,123,88,"error"],[133,72,123,93],[134,8,123,96],[134,9,123,97],[135,6,124,4],[136,6,126,4,"shardIds"],[136,14,126,12],[136,15,126,13,"push"],[136,19,126,17],[136,20,126,18,"result"],[136,26,126,24],[136,27,126,25,"shardId"],[136,34,126,33],[136,35,126,34],[137,6,127,4,"onProgress"],[137,16,127,14],[137,19,127,17,"i"],[137,20,127,18],[137,23,127,21],[137,24,127,22],[137,26,127,24,"shards"],[137,32,127,30],[137,33,127,31,"length"],[137,39,127,37],[137,40,127,38],[138,4,128,2],[139,4,130,2,"console"],[139,11,130,9],[139,12,130,10,"log"],[139,15,130,13],[139,16,130,14],[139,51,130,49],[139,53,130,51,"shardIds"],[139,61,130,59],[139,62,130,60],[140,4,131,2],[140,11,131,9],[141,6,131,11,"success"],[141,13,131,18],[141,15,131,20],[141,19,131,24],[142,6,131,26,"shardIds"],[143,4,131,35],[143,5,131,36],[144,2,132,0],[146,2,134,0],[147,0,135,0],[148,0,136,0],[149,2,137,7],[149,17,137,22,"downloadShard"],[149,30,137,35,"downloadShard"],[149,31,138,2,"shardId"],[149,38,138,17],[149,40,139,2,"userId"],[149,46,139,16],[149,48,140,64],[150,4,141,2],[150,8,141,6],[151,6,142,4],[151,12,142,10,"supabase"],[151,20,142,18],[151,23,142,21],[151,27,142,21,"getSupabase"],[151,46,142,32],[151,47,142,32,"getSupabase"],[151,58,142,32],[151,60,142,33],[151,61,142,34],[152,6,143,4],[152,12,143,10,"filePath"],[152,20,143,18],[152,23,143,21],[152,26,143,24,"userId"],[152,32,143,30],[152,36,143,34,"shardId"],[152,43,143,41],[152,45,143,43],[153,6,145,4,"console"],[153,13,145,11],[153,14,145,12,"log"],[153,17,145,15],[153,18,145,16],[153,44,145,42,"filePath"],[153,52,145,50],[153,54,145,52],[153,55,145,53],[154,6,147,4],[154,12,147,10],[155,8,147,12,"data"],[155,12,147,16],[156,8,147,18,"error"],[157,6,147,24],[157,7,147,25],[157,10,147,28],[157,16,147,34,"supabase"],[157,24,147,42],[157,25,147,43,"storage"],[157,32,147,50],[157,33,148,7,"from"],[157,37,148,11],[157,38,148,12,"STORAGE_BUCKET"],[157,57,148,26],[157,58,148,26,"STORAGE_BUCKET"],[157,72,148,26],[157,73,148,27],[157,74,149,7,"download"],[157,82,149,15],[157,83,149,16,"filePath"],[157,91,149,24],[157,92,149,25],[158,6,151,4],[158,10,151,8,"error"],[158,15,151,13],[158,17,151,15],[159,8,152,6,"console"],[159,15,152,13],[159,16,152,14,"error"],[159,21,152,19],[159,22,152,20],[159,45,152,43],[159,47,152,45,"error"],[159,52,152,50],[159,53,152,51],[160,8,153,6],[160,15,153,13],[161,10,153,15,"success"],[161,17,153,22],[161,19,153,24],[161,24,153,29],[162,10,153,31,"error"],[162,15,153,36],[162,17,153,38,"error"],[162,22,153,43],[162,23,153,44,"message"],[163,8,153,52],[163,9,153,53],[164,6,154,4],[165,6,156,4],[165,10,156,8],[165,11,156,9,"data"],[165,15,156,13],[165,17,156,15],[166,8,157,6],[166,15,157,13],[167,10,157,15,"success"],[167,17,157,22],[167,19,157,24],[167,24,157,29],[168,10,157,31,"error"],[168,15,157,36],[168,17,157,38],[169,8,157,57],[169,9,157,58],[170,6,158,4],[172,6,160,4],[173,6,161,4],[173,12,161,10,"text"],[173,16,161,14],[173,19,161,17],[173,25,161,23,"data"],[173,29,161,27],[173,30,161,28,"text"],[173,34,161,32],[173,35,161,33],[173,36,161,34],[174,6,163,4,"console"],[174,13,163,11],[174,14,163,12,"log"],[174,17,163,15],[174,18,163,16],[174,27,163,25,"shardId"],[174,34,163,32],[174,56,163,54,"text"],[174,60,163,58],[174,61,163,59,"length"],[174,67,163,65],[174,69,163,67],[174,70,163,68],[175,6,164,4],[175,13,164,11],[176,8,164,13,"success"],[176,15,164,20],[176,17,164,22],[176,21,164,26],[177,8,164,28,"data"],[177,12,164,32],[177,14,164,34,"text"],[178,6,164,39],[178,7,164,40],[179,4,165,2],[179,5,165,3],[179,6,165,4],[179,13,165,11,"error"],[179,18,165,21],[179,20,165,23],[180,6,166,4,"console"],[180,13,166,11],[180,14,166,12,"error"],[180,19,166,17],[180,20,166,18],[180,47,166,45],[180,49,166,47,"error"],[180,54,166,52],[180,55,166,53],[181,6,167,4],[181,13,167,11],[182,8,167,13,"success"],[182,15,167,20],[182,17,167,22],[182,22,167,27],[183,8,167,29,"error"],[183,13,167,34],[183,15,167,36,"error"],[183,20,167,41],[183,21,167,42,"message"],[183,28,167,49],[183,32,167,53],[184,6,167,71],[184,7,167,72],[185,4,168,2],[186,2,169,0],[188,2,171,0],[189,0,172,0],[190,0,173,0],[191,2,174,7],[191,17,174,22,"downloadAllShards"],[191,34,174,39,"downloadAllShards"],[191,35,175,2,"shardIds"],[191,43,175,20],[191,45,176,2,"indices"],[191,52,176,19],[191,54,177,2,"userId"],[191,60,177,16],[191,62,178,2,"onProgress"],[191,72,178,55],[191,74,179,67],[192,4,180,2],[192,10,180,8,"shards"],[192,16,180,23],[192,19,180,26],[192,21,180,28],[193,4,182,2,"console"],[193,11,182,9],[193,12,182,10,"log"],[193,15,182,13],[193,16,182,14],[193,40,182,38,"shardIds"],[193,48,182,46],[193,49,182,47,"length"],[193,55,182,53],[193,64,182,62],[193,65,182,63],[194,4,184,2],[194,9,184,7],[194,13,184,11,"i"],[194,14,184,12],[194,17,184,15],[194,18,184,16],[194,20,184,18,"i"],[194,21,184,19],[194,24,184,22,"shardIds"],[194,32,184,30],[194,33,184,31,"length"],[194,39,184,37],[194,41,184,39,"i"],[194,42,184,40],[194,44,184,42],[194,46,184,44],[195,6,185,4],[195,12,185,10,"result"],[195,18,185,16],[195,21,185,19],[195,27,185,25,"downloadShard"],[195,40,185,38],[195,41,185,39,"shardIds"],[195,49,185,47],[195,50,185,48,"i"],[195,51,185,49],[195,52,185,50],[195,54,185,52,"userId"],[195,60,185,58],[195,61,185,59],[196,6,187,4],[196,10,187,8],[196,11,187,9,"result"],[196,17,187,15],[196,18,187,16,"success"],[196,25,187,23],[196,27,187,25],[197,8,188,6],[197,15,188,13],[198,10,188,15,"success"],[198,17,188,22],[198,19,188,24],[198,24,188,29],[199,10,188,31,"error"],[199,15,188,36],[199,17,188,38],[199,45,188,66,"i"],[199,46,188,67],[199,49,188,70],[199,50,188,71],[199,55,188,76,"result"],[199,61,188,82],[199,62,188,83,"error"],[199,67,188,88],[200,8,188,91],[200,9,188,92],[201,6,189,4],[202,6,191,4,"shards"],[202,12,191,10],[202,13,191,11,"push"],[202,17,191,15],[202,18,191,16],[203,8,192,6,"id"],[203,10,192,8],[203,12,192,10,"shardIds"],[203,20,192,18],[203,21,192,19,"i"],[203,22,192,20],[203,23,192,21],[204,8,193,6,"data"],[204,12,193,10],[204,14,193,12,"result"],[204,20,193,18],[204,21,193,19,"data"],[204,25,193,24],[205,8,194,6,"index"],[205,13,194,11],[205,15,194,13,"indices"],[205,22,194,20],[205,23,194,21,"i"],[205,24,194,22],[206,6,195,4],[206,7,195,5],[206,8,195,6],[207,6,197,4,"onProgress"],[207,16,197,14],[207,19,197,17,"i"],[207,20,197,18],[207,23,197,21],[207,24,197,22],[207,26,197,24,"shardIds"],[207,34,197,32],[207,35,197,33,"length"],[207,41,197,39],[207,42,197,40],[208,4,198,2],[209,4,200,2,"console"],[209,11,200,9],[209,12,200,10,"log"],[209,15,200,13],[209,16,200,14],[209,52,200,50],[209,53,200,51],[210,4,201,2],[210,11,201,9],[211,6,201,11,"success"],[211,13,201,18],[211,15,201,20],[211,19,201,24],[212,6,201,26,"shards"],[213,4,201,33],[213,5,201,34],[214,2,202,0],[216,2,204,0],[217,0,205,0],[218,0,206,0],[219,2,207,7],[219,17,207,22,"cleanupShards"],[219,30,207,35,"cleanupShards"],[219,31,208,2,"shardIds"],[219,39,208,20],[219,41,209,2,"userId"],[219,47,209,16],[219,49,210,17],[220,4,211,2],[220,8,211,6],[221,6,212,4],[221,12,212,10,"supabase"],[221,20,212,18],[221,23,212,21],[221,27,212,21,"getSupabase"],[221,46,212,32],[221,47,212,32,"getSupabase"],[221,58,212,32],[221,60,212,33],[221,61,212,34],[222,6,213,4],[222,12,213,10,"filePaths"],[222,21,213,19],[222,24,213,22,"shardIds"],[222,32,213,30],[222,33,213,31,"map"],[222,36,213,34],[222,37,213,35,"id"],[222,39,213,37],[222,43,213,41],[222,46,213,44,"userId"],[222,52,213,50],[222,56,213,54,"id"],[222,58,213,56],[222,60,213,58],[222,61,213,59],[223,6,214,4],[223,12,214,10,"supabase"],[223,20,214,18],[223,21,214,19,"storage"],[223,28,214,26],[223,29,214,27,"from"],[223,33,214,31],[223,34,214,32,"STORAGE_BUCKET"],[223,53,214,46],[223,54,214,46,"STORAGE_BUCKET"],[223,68,214,46],[223,69,214,47],[223,70,214,48,"remove"],[223,76,214,54],[223,77,214,55,"filePaths"],[223,86,214,64],[223,87,214,65],[224,4,215,2],[224,5,215,3],[224,6,215,4],[224,13,215,11,"error"],[224,18,215,16],[224,20,215,18],[225,6,216,4,"console"],[225,13,216,11],[225,14,216,12,"error"],[225,19,216,17],[225,20,216,18],[225,47,216,45],[225,49,216,47,"error"],[225,54,216,52],[225,55,216,53],[226,4,217,2],[227,2,218,0],[229,2,220,0],[230,0,221,0],[231,0,222,0],[232,2,223,7],[232,17,223,22,"deleteDocumentShards"],[232,37,223,42,"deleteDocumentShards"],[232,38,224,2,"shardIds"],[232,46,224,20],[232,48,225,2,"userId"],[232,54,225,16],[232,56,226,49],[233,4,227,2],[233,8,227,6],[234,6,228,4],[234,12,228,10,"supabase"],[234,20,228,18],[234,23,228,21],[234,27,228,21,"getSupabase"],[234,46,228,32],[234,47,228,32,"getSupabase"],[234,58,228,32],[234,60,228,33],[234,61,228,34],[235,6,229,4],[235,12,229,10,"filePaths"],[235,21,229,19],[235,24,229,22,"shardIds"],[235,32,229,30],[235,33,229,31,"map"],[235,36,229,34],[235,37,229,35,"id"],[235,39,229,37],[235,43,229,41],[235,46,229,44,"userId"],[235,52,229,50],[235,56,229,54,"id"],[235,58,229,56],[235,60,229,58],[235,61,229,59],[236,6,230,4],[236,12,230,10],[237,8,230,12,"error"],[238,6,230,18],[238,7,230,19],[238,10,230,22],[238,16,230,28,"supabase"],[238,24,230,36],[238,25,230,37,"storage"],[238,32,230,44],[238,33,230,45,"from"],[238,37,230,49],[238,38,230,50,"STORAGE_BUCKET"],[238,57,230,64],[238,58,230,64,"STORAGE_BUCKET"],[238,72,230,64],[238,73,230,65],[238,74,230,66,"remove"],[238,80,230,72],[238,81,230,73,"filePaths"],[238,90,230,82],[238,91,230,83],[239,6,232,4],[239,10,232,8,"error"],[239,15,232,13],[239,17,232,15],[240,8,233,6],[240,15,233,13],[241,10,233,15,"success"],[241,17,233,22],[241,19,233,24],[241,24,233,29],[242,10,233,31,"error"],[242,15,233,36],[242,17,233,38,"error"],[242,22,233,43],[242,23,233,44,"message"],[243,8,233,52],[243,9,233,53],[244,6,234,4],[245,6,236,4],[245,13,236,11],[246,8,236,13,"success"],[246,15,236,20],[246,17,236,22],[247,6,236,27],[247,7,236,28],[248,4,237,2],[248,5,237,3],[248,6,237,4],[248,13,237,11,"error"],[248,18,237,21],[248,20,237,23],[249,6,238,4],[249,13,238,11],[250,8,238,13,"success"],[250,15,238,20],[250,17,238,22],[250,22,238,27],[251,8,238,29,"error"],[251,13,238,34],[251,15,238,36,"error"],[251,20,238,41],[251,21,238,42,"message"],[251,28,238,49],[251,32,238,53],[252,6,238,69],[252,7,238,70],[253,4,239,2],[254,2,240,0],[255,0,240,1],[255,3]],"functionMap":{"names":["<global>","checkBucketAccess","uploadShard","uploadAllShards","downloadShard","downloadAllShards","cleanupShards","shardIds.map$argument_0","deleteDocumentShards"],"mappings":"AAA;OCgB;CDmB;OEM;CFuD;OGK;CH8B;OIK;CJgC;OKK;CL4B;OMK;mCCM,uBD;CNK;OQK;mCDM,uBC;CRW"},"hasCjsExports":false},"type":"js/module"}]}