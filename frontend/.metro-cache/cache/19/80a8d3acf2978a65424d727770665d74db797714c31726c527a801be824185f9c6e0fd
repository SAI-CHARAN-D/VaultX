{"dependencies":[{"name":"./supabaseClient","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":106},"end":{"line":4,"column":47,"index":153}}],"key":"Fd7w8mMawcXEor1Po+CqWnKxQDc=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.signUp = signUp;\n  exports.signIn = signIn;\n  exports.signOut = signOut;\n  exports.getSession = getSession;\n  exports.onAuthStateChange = onAuthStateChange;\n  var _supabaseClient = require(_dependencyMap[0], \"./supabaseClient\");\n  // Authentication Service - Zero Knowledge Vault\n  // Supabase auth is for IDENTITY ONLY, not vault access\n\n  /**\n   * Sign up with email and password\n   * This creates identity only - vault setup happens separately\n   */\n  async function signUp(email, password) {\n    try {\n      const supabase = (0, _supabaseClient.getSupabase)();\n      const {\n        data,\n        error\n      } = await supabase.auth.signUp({\n        email,\n        password,\n        options: {\n          emailRedirectTo: undefined\n        }\n      });\n      if (error) {\n        if (error.message.includes('rate limit') || error.message.includes('Rate limit')) {\n          return {\n            success: false,\n            error: 'Too many signup attempts. Please wait a few minutes and try again.'\n          };\n        }\n        return {\n          success: false,\n          error: error.message\n        };\n      }\n      if (data.user) {\n        if (data.user.identities && data.user.identities.length === 0) {\n          return {\n            success: false,\n            error: 'This email is already registered. Please sign in instead.'\n          };\n        }\n        return {\n          success: true,\n          user: {\n            id: data.user.id,\n            email: data.user.email || email\n          }\n        };\n      }\n      return {\n        success: false,\n        error: 'Failed to create account'\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: error.message || 'Unknown error'\n      };\n    }\n  }\n\n  /**\n   * Sign in with email and password\n   */\n  async function signIn(email, password) {\n    try {\n      const supabase = (0, _supabaseClient.getSupabase)();\n      const {\n        data,\n        error\n      } = await supabase.auth.signInWithPassword({\n        email,\n        password\n      });\n      if (error) {\n        if (error.message.includes('Email not confirmed') || error.message.includes('email not confirmed')) {\n          return {\n            success: false,\n            error: 'Email not confirmed. Please check your email or disable email confirmation in Supabase dashboard.'\n          };\n        }\n        return {\n          success: false,\n          error: error.message\n        };\n      }\n      if (data.user) {\n        return {\n          success: true,\n          user: {\n            id: data.user.id,\n            email: data.user.email || email\n          }\n        };\n      }\n      return {\n        success: false,\n        error: 'Failed to sign in'\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: error.message || 'Unknown error'\n      };\n    }\n  }\n\n  /**\n   * Sign out\n   */\n  async function signOut() {\n    const supabase = (0, _supabaseClient.getSupabase)();\n    await supabase.auth.signOut();\n  }\n\n  /**\n   * Get current session\n   */\n  async function getSession() {\n    try {\n      const supabase = (0, _supabaseClient.getSupabase)();\n      const {\n        data: {\n          session\n        }\n      } = await supabase.auth.getSession();\n      console.log('SESSION:', session);\n      if (session?.user) {\n        return {\n          id: session.user.id,\n          email: session.user.email || ''\n        };\n      }\n      return null;\n    } catch (error) {\n      console.log('SESSION ERROR:', error);\n      return null;\n    }\n  }\n\n  /**\n   * Listen to auth state changes\n   */\n  function onAuthStateChange(callback) {\n    const supabase = (0, _supabaseClient.getSupabase)();\n    return supabase.auth.onAuthStateChange((event, session) => {\n      if (session?.user) {\n        callback({\n          id: session.user.id,\n          email: session.user.email || ''\n        });\n      } else {\n        callback(null);\n      }\n    });\n  }\n});","lineCount":167,"map":[[7,2,17,0,"exports"],[7,9,17,0],[7,10,17,0,"signUp"],[7,16,17,0],[7,19,17,0,"signUp"],[7,25,17,0],[8,2,64,0,"exports"],[8,9,64,0],[8,10,64,0,"signIn"],[8,16,64,0],[8,19,64,0,"signIn"],[8,25,64,0],[9,2,101,0,"exports"],[9,9,101,0],[9,10,101,0,"signOut"],[9,17,101,0],[9,20,101,0,"signOut"],[9,27,101,0],[10,2,109,0,"exports"],[10,9,109,0],[10,10,109,0,"getSession"],[10,20,109,0],[10,23,109,0,"getSession"],[10,33,109,0],[11,2,132,0,"exports"],[11,9,132,0],[11,10,132,0,"onAuthStateChange"],[11,27,132,0],[11,30,132,0,"onAuthStateChange"],[11,47,132,0],[12,2,4,0],[12,6,4,0,"_supabaseClient"],[12,21,4,0],[12,24,4,0,"require"],[12,31,4,0],[12,32,4,0,"_dependencyMap"],[12,46,4,0],[13,2,1,0],[14,2,2,0],[16,2,13,0],[17,0,14,0],[18,0,15,0],[19,0,16,0],[20,2,17,7],[20,17,17,22,"signUp"],[20,23,17,28,"signUp"],[20,24,17,29,"email"],[20,29,17,42],[20,31,17,44,"password"],[20,39,17,60],[20,41,17,83],[21,4,18,2],[21,8,18,6],[22,6,19,4],[22,12,19,10,"supabase"],[22,20,19,18],[22,23,19,21],[22,27,19,21,"getSupabase"],[22,42,19,32],[22,43,19,32,"getSupabase"],[22,54,19,32],[22,56,19,33],[22,57,19,34],[23,6,20,4],[23,12,20,10],[24,8,20,12,"data"],[24,12,20,16],[25,8,20,18,"error"],[26,6,20,24],[26,7,20,25],[26,10,20,28],[26,16,20,34,"supabase"],[26,24,20,42],[26,25,20,43,"auth"],[26,29,20,47],[26,30,20,48,"signUp"],[26,36,20,54],[26,37,20,55],[27,8,21,6,"email"],[27,13,21,11],[28,8,22,6,"password"],[28,16,22,14],[29,8,23,6,"options"],[29,15,23,13],[29,17,23,15],[30,10,24,8,"emailRedirectTo"],[30,25,24,23],[30,27,24,25,"undefined"],[31,8,25,6],[32,6,26,4],[32,7,26,5],[32,8,26,6],[33,6,28,4],[33,10,28,8,"error"],[33,15,28,13],[33,17,28,15],[34,8,29,6],[34,12,29,10,"error"],[34,17,29,15],[34,18,29,16,"message"],[34,25,29,23],[34,26,29,24,"includes"],[34,34,29,32],[34,35,29,33],[34,47,29,45],[34,48,29,46],[34,52,29,50,"error"],[34,57,29,55],[34,58,29,56,"message"],[34,65,29,63],[34,66,29,64,"includes"],[34,74,29,72],[34,75,29,73],[34,87,29,85],[34,88,29,86],[34,90,29,88],[35,10,30,8],[35,17,30,15],[36,12,31,10,"success"],[36,19,31,17],[36,21,31,19],[36,26,31,24],[37,12,32,10,"error"],[37,17,32,15],[37,19,32,17],[38,10,33,8],[38,11,33,9],[39,8,34,6],[40,8,35,6],[40,15,35,13],[41,10,35,15,"success"],[41,17,35,22],[41,19,35,24],[41,24,35,29],[42,10,35,31,"error"],[42,15,35,36],[42,17,35,38,"error"],[42,22,35,43],[42,23,35,44,"message"],[43,8,35,52],[43,9,35,53],[44,6,36,4],[45,6,38,4],[45,10,38,8,"data"],[45,14,38,12],[45,15,38,13,"user"],[45,19,38,17],[45,21,38,19],[46,8,39,6],[46,12,39,10,"data"],[46,16,39,14],[46,17,39,15,"user"],[46,21,39,19],[46,22,39,20,"identities"],[46,32,39,30],[46,36,39,34,"data"],[46,40,39,38],[46,41,39,39,"user"],[46,45,39,43],[46,46,39,44,"identities"],[46,56,39,54],[46,57,39,55,"length"],[46,63,39,61],[46,68,39,66],[46,69,39,67],[46,71,39,69],[47,10,40,8],[47,17,40,15],[48,12,41,10,"success"],[48,19,41,17],[48,21,41,19],[48,26,41,24],[49,12,42,10,"error"],[49,17,42,15],[49,19,42,17],[50,10,43,8],[50,11,43,9],[51,8,44,6],[52,8,46,6],[52,15,46,13],[53,10,47,8,"success"],[53,17,47,15],[53,19,47,17],[53,23,47,21],[54,10,48,8,"user"],[54,14,48,12],[54,16,48,14],[55,12,49,10,"id"],[55,14,49,12],[55,16,49,14,"data"],[55,20,49,18],[55,21,49,19,"user"],[55,25,49,23],[55,26,49,24,"id"],[55,28,49,26],[56,12,50,10,"email"],[56,17,50,15],[56,19,50,17,"data"],[56,23,50,21],[56,24,50,22,"user"],[56,28,50,26],[56,29,50,27,"email"],[56,34,50,32],[56,38,50,36,"email"],[57,10,51,8],[58,8,52,6],[58,9,52,7],[59,6,53,4],[60,6,55,4],[60,13,55,11],[61,8,55,13,"success"],[61,15,55,20],[61,17,55,22],[61,22,55,27],[62,8,55,29,"error"],[62,13,55,34],[62,15,55,36],[63,6,55,63],[63,7,55,64],[64,4,56,2],[64,5,56,3],[64,6,56,4],[64,13,56,11,"error"],[64,18,56,21],[64,20,56,23],[65,6,57,4],[65,13,57,11],[66,8,57,13,"success"],[66,15,57,20],[66,17,57,22],[66,22,57,27],[67,8,57,29,"error"],[67,13,57,34],[67,15,57,36,"error"],[67,20,57,41],[67,21,57,42,"message"],[67,28,57,49],[67,32,57,53],[68,6,57,69],[68,7,57,70],[69,4,58,2],[70,2,59,0],[72,2,61,0],[73,0,62,0],[74,0,63,0],[75,2,64,7],[75,17,64,22,"signIn"],[75,23,64,28,"signIn"],[75,24,64,29,"email"],[75,29,64,42],[75,31,64,44,"password"],[75,39,64,60],[75,41,64,83],[76,4,65,2],[76,8,65,6],[77,6,66,4],[77,12,66,10,"supabase"],[77,20,66,18],[77,23,66,21],[77,27,66,21,"getSupabase"],[77,42,66,32],[77,43,66,32,"getSupabase"],[77,54,66,32],[77,56,66,33],[77,57,66,34],[78,6,67,4],[78,12,67,10],[79,8,67,12,"data"],[79,12,67,16],[80,8,67,18,"error"],[81,6,67,24],[81,7,67,25],[81,10,67,28],[81,16,67,34,"supabase"],[81,24,67,42],[81,25,67,43,"auth"],[81,29,67,47],[81,30,67,48,"signInWithPassword"],[81,48,67,66],[81,49,67,67],[82,8,68,6,"email"],[82,13,68,11],[83,8,69,6,"password"],[84,6,70,4],[84,7,70,5],[84,8,70,6],[85,6,72,4],[85,10,72,8,"error"],[85,15,72,13],[85,17,72,15],[86,8,73,6],[86,12,73,10,"error"],[86,17,73,15],[86,18,73,16,"message"],[86,25,73,23],[86,26,73,24,"includes"],[86,34,73,32],[86,35,73,33],[86,56,73,54],[86,57,73,55],[86,61,73,59,"error"],[86,66,73,64],[86,67,73,65,"message"],[86,74,73,72],[86,75,73,73,"includes"],[86,83,73,81],[86,84,73,82],[86,105,73,103],[86,106,73,104],[86,108,73,106],[87,10,74,8],[87,17,74,15],[88,12,75,10,"success"],[88,19,75,17],[88,21,75,19],[88,26,75,24],[89,12,76,10,"error"],[89,17,76,15],[89,19,76,17],[90,10,77,8],[90,11,77,9],[91,8,78,6],[92,8,79,6],[92,15,79,13],[93,10,79,15,"success"],[93,17,79,22],[93,19,79,24],[93,24,79,29],[94,10,79,31,"error"],[94,15,79,36],[94,17,79,38,"error"],[94,22,79,43],[94,23,79,44,"message"],[95,8,79,52],[95,9,79,53],[96,6,80,4],[97,6,82,4],[97,10,82,8,"data"],[97,14,82,12],[97,15,82,13,"user"],[97,19,82,17],[97,21,82,19],[98,8,83,6],[98,15,83,13],[99,10,84,8,"success"],[99,17,84,15],[99,19,84,17],[99,23,84,21],[100,10,85,8,"user"],[100,14,85,12],[100,16,85,14],[101,12,86,10,"id"],[101,14,86,12],[101,16,86,14,"data"],[101,20,86,18],[101,21,86,19,"user"],[101,25,86,23],[101,26,86,24,"id"],[101,28,86,26],[102,12,87,10,"email"],[102,17,87,15],[102,19,87,17,"data"],[102,23,87,21],[102,24,87,22,"user"],[102,28,87,26],[102,29,87,27,"email"],[102,34,87,32],[102,38,87,36,"email"],[103,10,88,8],[104,8,89,6],[104,9,89,7],[105,6,90,4],[106,6,92,4],[106,13,92,11],[107,8,92,13,"success"],[107,15,92,20],[107,17,92,22],[107,22,92,27],[108,8,92,29,"error"],[108,13,92,34],[108,15,92,36],[109,6,92,56],[109,7,92,57],[110,4,93,2],[110,5,93,3],[110,6,93,4],[110,13,93,11,"error"],[110,18,93,21],[110,20,93,23],[111,6,94,4],[111,13,94,11],[112,8,94,13,"success"],[112,15,94,20],[112,17,94,22],[112,22,94,27],[113,8,94,29,"error"],[113,13,94,34],[113,15,94,36,"error"],[113,20,94,41],[113,21,94,42,"message"],[113,28,94,49],[113,32,94,53],[114,6,94,69],[114,7,94,70],[115,4,95,2],[116,2,96,0],[118,2,98,0],[119,0,99,0],[120,0,100,0],[121,2,101,7],[121,17,101,22,"signOut"],[121,24,101,29,"signOut"],[121,25,101,29],[121,27,101,47],[122,4,102,2],[122,10,102,8,"supabase"],[122,18,102,16],[122,21,102,19],[122,25,102,19,"getSupabase"],[122,40,102,30],[122,41,102,30,"getSupabase"],[122,52,102,30],[122,54,102,31],[122,55,102,32],[123,4,103,2],[123,10,103,8,"supabase"],[123,18,103,16],[123,19,103,17,"auth"],[123,23,103,21],[123,24,103,22,"signOut"],[123,31,103,29],[123,32,103,30],[123,33,103,31],[124,2,104,0],[126,2,106,0],[127,0,107,0],[128,0,108,0],[129,2,109,7],[129,17,109,22,"getSession"],[129,27,109,32,"getSession"],[129,28,109,32],[129,30,109,57],[130,4,110,2],[130,8,110,6],[131,6,111,4],[131,12,111,10,"supabase"],[131,20,111,18],[131,23,111,21],[131,27,111,21,"getSupabase"],[131,42,111,32],[131,43,111,32,"getSupabase"],[131,54,111,32],[131,56,111,33],[131,57,111,34],[132,6,112,4],[132,12,112,10],[133,8,112,12,"data"],[133,12,112,16],[133,14,112,18],[134,10,112,20,"session"],[135,8,112,28],[136,6,112,30],[136,7,112,31],[136,10,112,34],[136,16,112,40,"supabase"],[136,24,112,48],[136,25,112,49,"auth"],[136,29,112,53],[136,30,112,54,"getSession"],[136,40,112,64],[136,41,112,65],[136,42,112,66],[137,6,113,4,"console"],[137,13,113,11],[137,14,113,12,"log"],[137,17,113,15],[137,18,113,16],[137,28,113,26],[137,30,113,28,"session"],[137,37,113,35],[137,38,113,36],[138,6,115,4],[138,10,115,8,"session"],[138,17,115,15],[138,19,115,17,"user"],[138,23,115,21],[138,25,115,23],[139,8,116,6],[139,15,116,13],[140,10,117,8,"id"],[140,12,117,10],[140,14,117,12,"session"],[140,21,117,19],[140,22,117,20,"user"],[140,26,117,24],[140,27,117,25,"id"],[140,29,117,27],[141,10,118,8,"email"],[141,15,118,13],[141,17,118,15,"session"],[141,24,118,22],[141,25,118,23,"user"],[141,29,118,27],[141,30,118,28,"email"],[141,35,118,33],[141,39,118,37],[142,8,119,6],[142,9,119,7],[143,6,120,4],[144,6,122,4],[144,13,122,11],[144,17,122,15],[145,4,123,2],[145,5,123,3],[145,6,123,4],[145,13,123,11,"error"],[145,18,123,16],[145,20,123,18],[146,6,124,4,"console"],[146,13,124,11],[146,14,124,12,"log"],[146,17,124,15],[146,18,124,16],[146,34,124,32],[146,36,124,34,"error"],[146,41,124,39],[146,42,124,40],[147,6,125,4],[147,13,125,11],[147,17,125,15],[148,4,126,2],[149,2,127,0],[151,2,129,0],[152,0,130,0],[153,0,131,0],[154,2,132,7],[154,11,132,16,"onAuthStateChange"],[154,28,132,33,"onAuthStateChange"],[154,29,132,34,"callback"],[154,37,132,71],[154,39,132,73],[155,4,133,2],[155,10,133,8,"supabase"],[155,18,133,16],[155,21,133,19],[155,25,133,19,"getSupabase"],[155,40,133,30],[155,41,133,30,"getSupabase"],[155,52,133,30],[155,54,133,31],[155,55,133,32],[156,4,134,2],[156,11,134,9,"supabase"],[156,19,134,17],[156,20,134,18,"auth"],[156,24,134,22],[156,25,134,23,"onAuthStateChange"],[156,42,134,40],[156,43,134,41],[156,44,134,42,"event"],[156,49,134,47],[156,51,134,49,"session"],[156,58,134,56],[156,63,134,61],[157,6,135,4],[157,10,135,8,"session"],[157,17,135,15],[157,19,135,17,"user"],[157,23,135,21],[157,25,135,23],[158,8,136,6,"callback"],[158,16,136,14],[158,17,136,15],[159,10,137,8,"id"],[159,12,137,10],[159,14,137,12,"session"],[159,21,137,19],[159,22,137,20,"user"],[159,26,137,24],[159,27,137,25,"id"],[159,29,137,27],[160,10,138,8,"email"],[160,15,138,13],[160,17,138,15,"session"],[160,24,138,22],[160,25,138,23,"user"],[160,29,138,27],[160,30,138,28,"email"],[160,35,138,33],[160,39,138,37],[161,8,139,6],[161,9,139,7],[161,10,139,8],[162,6,140,4],[162,7,140,5],[162,13,140,11],[163,8,141,6,"callback"],[163,16,141,14],[163,17,141,15],[163,21,141,19],[163,22,141,20],[164,6,142,4],[165,4,143,2],[165,5,143,3],[165,6,143,4],[166,2,144,0],[167,0,144,1],[167,3]],"functionMap":{"names":["<global>","signUp","signIn","signOut","getSession","onAuthStateChange","supabase.auth.onAuthStateChange$argument_0"],"mappings":"AAA;OCgB;CD0C;OEK;CFgC;OGK;CHG;OIK;CJkB;OKK;yCCE;GDS;CLC"},"hasCjsExports":false},"type":"js/module"}]}