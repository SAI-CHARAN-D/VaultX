{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"../auth/supabaseClient","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":156},"end":{"line":5,"column":69,"index":225}}],"key":"N6WSRy60K8929CSDB5Gy6caq2pI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.checkBucketAccess = checkBucketAccess;\n  exports.uploadShard = uploadShard;\n  exports.uploadAllShards = uploadAllShards;\n  exports.downloadShard = downloadShard;\n  exports.downloadAllShards = downloadAllShards;\n  exports.cleanupShards = cleanupShards;\n  exports.deleteDocumentShards = deleteDocumentShards;\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _authSupabaseClient = require(_dependencyMap[1], \"../auth/supabaseClient\");\n  // Cloud Storage Service - Zero Knowledge Vault\n  // Uploads ONLY encrypted shards with random UUID filenames\n  // Server sees meaningless blobs - no metadata\n  /**\n   * Check if storage bucket exists and is accessible\n   */\n  function checkBucketAccess() {\n    return _checkBucketAccess.apply(this, arguments);\n  }\n  /**\n   * Upload a single shard to Supabase Storage\n   * Filename is the random UUID - no relation to original file\n   */\n  function _checkBucketAccess() {\n    _checkBucketAccess = (0, _asyncToGenerator.default)(function* () {\n      try {\n        var supabase = (0, _authSupabaseClient.getSupabase)();\n        var _yield$supabase$stora = yield supabase.storage.getBucket(_authSupabaseClient.STORAGE_BUCKET),\n          data = _yield$supabase$stora.data,\n          error = _yield$supabase$stora.error;\n        if (error) {\n          console.error('Bucket access error:', error);\n          return {\n            success: false,\n            error: `Storage bucket \"${_authSupabaseClient.STORAGE_BUCKET}\" not found or not accessible. Please create it in Supabase Dashboard → Storage.`\n          };\n        }\n        console.log('Bucket access OK:', data);\n        return {\n          success: true\n        };\n      } catch (error) {\n        console.error('Bucket check exception:', error);\n        return {\n          success: false,\n          error: error.message\n        };\n      }\n    });\n    return _checkBucketAccess.apply(this, arguments);\n  }\n  function uploadShard(_x, _x2) {\n    return _uploadShard.apply(this, arguments);\n  }\n  /**\n   * Upload all shards for a document\n   */\n  function _uploadShard() {\n    _uploadShard = (0, _asyncToGenerator.default)(function* (shard, userId) {\n      try {\n        var supabase = (0, _authSupabaseClient.getSupabase)();\n\n        // Path: userId/shardUUID (user folder for RLS)\n        var filePath = `${userId}/${shard.id}`;\n        console.log(`Uploading shard ${shard.id} to ${filePath}, data length: ${shard.data.length}`);\n\n        // Convert string to ArrayBuffer for upload\n        var encoder = new TextEncoder();\n        var uint8Array = encoder.encode(shard.data);\n        var _yield$supabase$stora2 = yield supabase.storage.from(_authSupabaseClient.STORAGE_BUCKET).upload(filePath, uint8Array, {\n            contentType: 'application/octet-stream',\n            upsert: true\n          }),\n          data = _yield$supabase$stora2.data,\n          error = _yield$supabase$stora2.error;\n        if (error) {\n          console.error('Shard upload error:', JSON.stringify(error));\n\n          // Provide more specific error messages\n          if (error.message.includes('Bucket not found')) {\n            return {\n              success: false,\n              error: `Storage bucket \"${_authSupabaseClient.STORAGE_BUCKET}\" does not exist. Create it in Supabase Dashboard → Storage.`\n            };\n          }\n          if (error.message.includes('row-level security') || error.message.includes('policy')) {\n            return {\n              success: false,\n              error: 'Storage policy error. Please add INSERT policy for the bucket in Supabase.'\n            };\n          }\n          if (error.message.includes('Invalid JWT') || error.message.includes('not authenticated')) {\n            return {\n              success: false,\n              error: 'Authentication error. Please sign out and sign in again.'\n            };\n          }\n          return {\n            success: false,\n            error: error.message\n          };\n        }\n        console.log(`Shard ${shard.id} uploaded successfully:`, data);\n        return {\n          success: true,\n          shardId: shard.id\n        };\n      } catch (error) {\n        console.error('Shard upload exception:', error);\n        return {\n          success: false,\n          error: error.message || 'Upload failed'\n        };\n      }\n    });\n    return _uploadShard.apply(this, arguments);\n  }\n  function uploadAllShards(_x3, _x4, _x5) {\n    return _uploadAllShards.apply(this, arguments);\n  }\n  /**\n   * Download a shard from Supabase Storage\n   */\n  function _uploadAllShards() {\n    _uploadAllShards = (0, _asyncToGenerator.default)(function* (shards, userId, onProgress) {\n      // First check if bucket is accessible\n      var bucketCheck = yield checkBucketAccess();\n      if (!bucketCheck.success) {\n        return {\n          success: false,\n          error: bucketCheck.error\n        };\n      }\n      var shardIds = [];\n      console.log(`Starting upload of ${shards.length} shards for user ${userId}`);\n      for (var i = 0; i < shards.length; i++) {\n        var result = yield uploadShard(shards[i], userId);\n        if (!result.success) {\n          console.error(`Failed at shard ${i + 1}, cleaning up...`);\n          yield cleanupShards(shardIds, userId);\n          return {\n            success: false,\n            error: `Shard ${i + 1}/${shards.length} failed: ${result.error}`\n          };\n        }\n        shardIds.push(result.shardId);\n        onProgress?.(i + 1, shards.length);\n      }\n      console.log('All shards uploaded successfully:', shardIds);\n      return {\n        success: true,\n        shardIds\n      };\n    });\n    return _uploadAllShards.apply(this, arguments);\n  }\n  function downloadShard(_x6, _x7) {\n    return _downloadShard.apply(this, arguments);\n  }\n  /**\n   * Download all shards for a document\n   */\n  function _downloadShard() {\n    _downloadShard = (0, _asyncToGenerator.default)(function* (shardId, userId) {\n      try {\n        var supabase = (0, _authSupabaseClient.getSupabase)();\n        var filePath = `${userId}/${shardId}`;\n        console.log(`Downloading shard from ${filePath}`);\n        var _yield$supabase$stora3 = yield supabase.storage.from(_authSupabaseClient.STORAGE_BUCKET).download(filePath),\n          data = _yield$supabase$stora3.data,\n          error = _yield$supabase$stora3.error;\n        if (error) {\n          console.error('Shard download error:', error);\n          return {\n            success: false,\n            error: error.message\n          };\n        }\n        if (!data) {\n          return {\n            success: false,\n            error: 'No data received'\n          };\n        }\n\n        // Convert blob to string\n        var text = yield data.text();\n        console.log(`Shard ${shardId} downloaded, size: ${text.length}`);\n        return {\n          success: true,\n          data: text\n        };\n      } catch (error) {\n        console.error('Shard download exception:', error);\n        return {\n          success: false,\n          error: error.message || 'Download failed'\n        };\n      }\n    });\n    return _downloadShard.apply(this, arguments);\n  }\n  function downloadAllShards(_x8, _x9, _x0, _x1) {\n    return _downloadAllShards.apply(this, arguments);\n  }\n  /**\n   * Delete shards from storage\n   */\n  function _downloadAllShards() {\n    _downloadAllShards = (0, _asyncToGenerator.default)(function* (shardIds, indices, userId, onProgress) {\n      var shards = [];\n      console.log(`Starting download of ${shardIds.length} shards`);\n      for (var i = 0; i < shardIds.length; i++) {\n        var result = yield downloadShard(shardIds[i], userId);\n        if (!result.success) {\n          return {\n            success: false,\n            error: `Failed to download shard ${i + 1}: ${result.error}`\n          };\n        }\n        shards.push({\n          id: shardIds[i],\n          data: result.data,\n          index: indices[i]\n        });\n        onProgress?.(i + 1, shardIds.length);\n      }\n      console.log('All shards downloaded successfully');\n      return {\n        success: true,\n        shards\n      };\n    });\n    return _downloadAllShards.apply(this, arguments);\n  }\n  function cleanupShards(_x10, _x11) {\n    return _cleanupShards.apply(this, arguments);\n  }\n  /**\n   * Delete a document's shards\n   */\n  function _cleanupShards() {\n    _cleanupShards = (0, _asyncToGenerator.default)(function* (shardIds, userId) {\n      try {\n        var supabase = (0, _authSupabaseClient.getSupabase)();\n        var filePaths = shardIds.map(id => `${userId}/${id}`);\n        yield supabase.storage.from(_authSupabaseClient.STORAGE_BUCKET).remove(filePaths);\n      } catch (error) {\n        console.error('Failed to cleanup shards:', error);\n      }\n    });\n    return _cleanupShards.apply(this, arguments);\n  }\n  function deleteDocumentShards(_x12, _x13) {\n    return _deleteDocumentShards.apply(this, arguments);\n  }\n  function _deleteDocumentShards() {\n    _deleteDocumentShards = (0, _asyncToGenerator.default)(function* (shardIds, userId) {\n      try {\n        var supabase = (0, _authSupabaseClient.getSupabase)();\n        var filePaths = shardIds.map(id => `${userId}/${id}`);\n        var _yield$supabase$stora4 = yield supabase.storage.from(_authSupabaseClient.STORAGE_BUCKET).remove(filePaths),\n          error = _yield$supabase$stora4.error;\n        if (error) {\n          return {\n            success: false,\n            error: error.message\n          };\n        }\n        return {\n          success: true\n        };\n      } catch (error) {\n        return {\n          success: false,\n          error: error.message || 'Delete failed'\n        };\n      }\n    });\n    return _deleteDocumentShards.apply(this, arguments);\n  }\n});","lineCount":293,"map":[[12,2,17,0,"exports"],[12,9,17,0],[12,10,17,0,"checkBucketAccess"],[12,27,17,0],[12,30,17,0,"checkBucketAccess"],[12,47,17,0],[13,2,42,0,"exports"],[13,9,42,0],[13,10,42,0,"uploadShard"],[13,21,42,0],[13,24,42,0,"uploadShard"],[13,35,42,0],[14,2,102,0,"exports"],[14,9,102,0],[14,10,102,0,"uploadAllShards"],[14,25,102,0],[14,28,102,0,"uploadAllShards"],[14,43,102,0],[15,2,137,0,"exports"],[15,9,137,0],[15,10,137,0,"downloadShard"],[15,23,137,0],[15,26,137,0,"downloadShard"],[15,39,137,0],[16,2,174,0,"exports"],[16,9,174,0],[16,10,174,0,"downloadAllShards"],[16,27,174,0],[16,30,174,0,"downloadAllShards"],[16,47,174,0],[17,2,207,0,"exports"],[17,9,207,0],[17,10,207,0,"cleanupShards"],[17,23,207,0],[17,26,207,0,"cleanupShards"],[17,39,207,0],[18,2,223,0,"exports"],[18,9,223,0],[18,10,223,0,"deleteDocumentShards"],[18,30,223,0],[18,33,223,0,"deleteDocumentShards"],[18,53,223,0],[19,2,240,1],[19,6,240,1,"_babelRuntimeHelpersAsyncToGenerator"],[19,42,240,1],[19,45,240,1,"require"],[19,52,240,1],[19,53,240,1,"_dependencyMap"],[19,67,240,1],[20,2,240,1],[20,6,240,1,"_asyncToGenerator"],[20,23,240,1],[20,26,240,1,"_interopDefault"],[20,41,240,1],[20,42,240,1,"_babelRuntimeHelpersAsyncToGenerator"],[20,78,240,1],[21,2,5,0],[21,6,5,0,"_authSupabaseClient"],[21,25,5,0],[21,28,5,0,"require"],[21,35,5,0],[21,36,5,0,"_dependencyMap"],[21,50,5,0],[22,2,1,0],[23,2,2,0],[24,2,3,0],[25,2,14,0],[26,0,15,0],[27,0,16,0],[28,2,14,0],[28,11,17,22,"checkBucketAccess"],[28,28,17,39,"checkBucketAccess"],[28,29,17,39],[29,4,17,39],[29,11,17,39,"_checkBucketAccess"],[29,29,17,39],[29,30,17,39,"apply"],[29,35,17,39],[29,42,17,39,"arguments"],[29,51,17,39],[30,2,17,39],[31,2,38,0],[32,0,39,0],[33,0,40,0],[34,0,41,0],[35,2,38,0],[35,11,38,0,"_checkBucketAccess"],[35,30,38,0],[36,4,38,0,"_checkBucketAccess"],[36,22,38,0],[36,29,38,0,"_asyncToGenerator"],[36,46,38,0],[36,47,38,0,"default"],[36,54,38,0],[36,56,17,7],[36,69,17,89],[37,6,18,2],[37,10,18,6],[38,8,19,4],[38,12,19,10,"supabase"],[38,20,19,18],[38,23,19,21],[38,27,19,21,"getSupabase"],[38,46,19,32],[38,47,19,32,"getSupabase"],[38,58,19,32],[38,60,19,33],[38,61,19,34],[39,8,20,4],[39,12,20,4,"_yield$supabase$stora"],[39,33,20,4],[39,42,20,34,"supabase"],[39,50,20,42],[39,51,20,43,"storage"],[39,58,20,50],[39,59,20,51,"getBucket"],[39,68,20,60],[39,69,20,61,"STORAGE_BUCKET"],[39,88,20,75],[39,89,20,75,"STORAGE_BUCKET"],[39,103,20,75],[39,104,20,76],[40,10,20,12,"data"],[40,14,20,16],[40,17,20,16,"_yield$supabase$stora"],[40,38,20,16],[40,39,20,12,"data"],[40,43,20,16],[41,10,20,18,"error"],[41,15,20,23],[41,18,20,23,"_yield$supabase$stora"],[41,39,20,23],[41,40,20,18,"error"],[41,45,20,23],[42,8,22,4],[42,12,22,8,"error"],[42,17,22,13],[42,19,22,15],[43,10,23,6,"console"],[43,17,23,13],[43,18,23,14,"error"],[43,23,23,19],[43,24,23,20],[43,46,23,42],[43,48,23,44,"error"],[43,53,23,49],[43,54,23,50],[44,10,24,6],[44,17,24,13],[45,12,25,8,"success"],[45,19,25,15],[45,21,25,17],[45,26,25,22],[46,12,26,8,"error"],[46,17,26,13],[46,19,26,15],[46,38,26,34,"STORAGE_BUCKET"],[46,57,26,48],[46,58,26,48,"STORAGE_BUCKET"],[46,72,26,48],[47,10,27,6],[47,11,27,7],[48,8,28,4],[49,8,30,4,"console"],[49,15,30,11],[49,16,30,12,"log"],[49,19,30,15],[49,20,30,16],[49,39,30,35],[49,41,30,37,"data"],[49,45,30,41],[49,46,30,42],[50,8,31,4],[50,15,31,11],[51,10,31,13,"success"],[51,17,31,20],[51,19,31,22],[52,8,31,27],[52,9,31,28],[53,6,32,2],[53,7,32,3],[53,8,32,4],[53,15,32,11,"error"],[53,20,32,21],[53,22,32,23],[54,8,33,4,"console"],[54,15,33,11],[54,16,33,12,"error"],[54,21,33,17],[54,22,33,18],[54,47,33,43],[54,49,33,45,"error"],[54,54,33,50],[54,55,33,51],[55,8,34,4],[55,15,34,11],[56,10,34,13,"success"],[56,17,34,20],[56,19,34,22],[56,24,34,27],[57,10,34,29,"error"],[57,15,34,34],[57,17,34,36,"error"],[57,22,34,41],[57,23,34,42,"message"],[58,8,34,50],[58,9,34,51],[59,6,35,2],[60,4,36,0],[60,5,36,1],[61,4,36,1],[61,11,36,1,"_checkBucketAccess"],[61,29,36,1],[61,30,36,1,"apply"],[61,35,36,1],[61,42,36,1,"arguments"],[61,51,36,1],[62,2,36,1],[63,2,36,1],[63,11,42,22,"uploadShard"],[63,22,42,33,"uploadShard"],[63,23,42,33,"_x"],[63,25,42,33],[63,27,42,33,"_x2"],[63,30,42,33],[64,4,42,33],[64,11,42,33,"_uploadShard"],[64,23,42,33],[64,24,42,33,"apply"],[64,29,42,33],[64,36,42,33,"arguments"],[64,45,42,33],[65,2,42,33],[66,2,99,0],[67,0,100,0],[68,0,101,0],[69,2,99,0],[69,11,99,0,"_uploadShard"],[69,24,99,0],[70,4,99,0,"_uploadShard"],[70,16,99,0],[70,23,99,0,"_asyncToGenerator"],[70,40,99,0],[70,41,99,0,"default"],[70,48,99,0],[70,50,42,7],[70,61,43,2,"shard"],[70,66,43,14],[70,68,44,2,"userId"],[70,74,44,16],[70,76,45,25],[71,6,46,2],[71,10,46,6],[72,8,47,4],[72,12,47,10,"supabase"],[72,20,47,18],[72,23,47,21],[72,27,47,21,"getSupabase"],[72,46,47,32],[72,47,47,32,"getSupabase"],[72,58,47,32],[72,60,47,33],[72,61,47,34],[74,8,49,4],[75,8,50,4],[75,12,50,10,"filePath"],[75,20,50,18],[75,23,50,21],[75,26,50,24,"userId"],[75,32,50,30],[75,36,50,34,"shard"],[75,41,50,39],[75,42,50,40,"id"],[75,44,50,42],[75,46,50,44],[76,8,52,4,"console"],[76,15,52,11],[76,16,52,12,"log"],[76,19,52,15],[76,20,52,16],[76,39,52,35,"shard"],[76,44,52,40],[76,45,52,41,"id"],[76,47,52,43],[76,54,52,50,"filePath"],[76,62,52,58],[76,80,52,76,"shard"],[76,85,52,81],[76,86,52,82,"data"],[76,90,52,86],[76,91,52,87,"length"],[76,97,52,93],[76,99,52,95],[76,100,52,96],[78,8,54,4],[79,8,55,4],[79,12,55,10,"encoder"],[79,19,55,17],[79,22,55,20],[79,26,55,24,"TextEncoder"],[79,37,55,35],[79,38,55,36],[79,39,55,37],[80,8,56,4],[80,12,56,10,"uint8Array"],[80,22,56,20],[80,25,56,23,"encoder"],[80,32,56,30],[80,33,56,31,"encode"],[80,39,56,37],[80,40,56,38,"shard"],[80,45,56,43],[80,46,56,44,"data"],[80,50,56,48],[80,51,56,49],[81,8,58,4],[81,12,58,4,"_yield$supabase$stora2"],[81,34,58,4],[81,43,58,34,"supabase"],[81,51,58,42],[81,52,58,43,"storage"],[81,59,58,50],[81,60,59,7,"from"],[81,64,59,11],[81,65,59,12,"STORAGE_BUCKET"],[81,84,59,26],[81,85,59,26,"STORAGE_BUCKET"],[81,99,59,26],[81,100,59,27],[81,101,60,7,"upload"],[81,107,60,13],[81,108,60,14,"filePath"],[81,116,60,22],[81,118,60,24,"uint8Array"],[81,128,60,34],[81,130,60,36],[82,12,61,8,"contentType"],[82,23,61,19],[82,25,61,21],[82,51,61,47],[83,12,62,8,"upsert"],[83,18,62,14],[83,20,62,16],[84,10,63,6],[84,11,63,7],[84,12,63,8],[85,10,58,12,"data"],[85,14,58,16],[85,17,58,16,"_yield$supabase$stora2"],[85,39,58,16],[85,40,58,12,"data"],[85,44,58,16],[86,10,58,18,"error"],[86,15,58,23],[86,18,58,23,"_yield$supabase$stora2"],[86,40,58,23],[86,41,58,18,"error"],[86,46,58,23],[87,8,65,4],[87,12,65,8,"error"],[87,17,65,13],[87,19,65,15],[88,10,66,6,"console"],[88,17,66,13],[88,18,66,14,"error"],[88,23,66,19],[88,24,66,20],[88,45,66,41],[88,47,66,43,"JSON"],[88,51,66,47],[88,52,66,48,"stringify"],[88,61,66,57],[88,62,66,58,"error"],[88,67,66,63],[88,68,66,64],[88,69,66,65],[90,10,68,6],[91,10,69,6],[91,14,69,10,"error"],[91,19,69,15],[91,20,69,16,"message"],[91,27,69,23],[91,28,69,24,"includes"],[91,36,69,32],[91,37,69,33],[91,55,69,51],[91,56,69,52],[91,58,69,54],[92,12,70,8],[92,19,70,15],[93,14,71,10,"success"],[93,21,71,17],[93,23,71,19],[93,28,71,24],[94,14,72,10,"error"],[94,19,72,15],[94,21,72,17],[94,40,72,36,"STORAGE_BUCKET"],[94,59,72,50],[94,60,72,50,"STORAGE_BUCKET"],[94,74,72,50],[95,12,73,8],[95,13,73,9],[96,10,74,6],[97,10,75,6],[97,14,75,10,"error"],[97,19,75,15],[97,20,75,16,"message"],[97,27,75,23],[97,28,75,24,"includes"],[97,36,75,32],[97,37,75,33],[97,57,75,53],[97,58,75,54],[97,62,75,58,"error"],[97,67,75,63],[97,68,75,64,"message"],[97,75,75,71],[97,76,75,72,"includes"],[97,84,75,80],[97,85,75,81],[97,93,75,89],[97,94,75,90],[97,96,75,92],[98,12,76,8],[98,19,76,15],[99,14,77,10,"success"],[99,21,77,17],[99,23,77,19],[99,28,77,24],[100,14,78,10,"error"],[100,19,78,15],[100,21,78,17],[101,12,79,8],[101,13,79,9],[102,10,80,6],[103,10,81,6],[103,14,81,10,"error"],[103,19,81,15],[103,20,81,16,"message"],[103,27,81,23],[103,28,81,24,"includes"],[103,36,81,32],[103,37,81,33],[103,50,81,46],[103,51,81,47],[103,55,81,51,"error"],[103,60,81,56],[103,61,81,57,"message"],[103,68,81,64],[103,69,81,65,"includes"],[103,77,81,73],[103,78,81,74],[103,97,81,93],[103,98,81,94],[103,100,81,96],[104,12,82,8],[104,19,82,15],[105,14,83,10,"success"],[105,21,83,17],[105,23,83,19],[105,28,83,24],[106,14,84,10,"error"],[106,19,84,15],[106,21,84,17],[107,12,85,8],[107,13,85,9],[108,10,86,6],[109,10,88,6],[109,17,88,13],[110,12,88,15,"success"],[110,19,88,22],[110,21,88,24],[110,26,88,29],[111,12,88,31,"error"],[111,17,88,36],[111,19,88,38,"error"],[111,24,88,43],[111,25,88,44,"message"],[112,10,88,52],[112,11,88,53],[113,8,89,4],[114,8,91,4,"console"],[114,15,91,11],[114,16,91,12,"log"],[114,19,91,15],[114,20,91,16],[114,29,91,25,"shard"],[114,34,91,30],[114,35,91,31,"id"],[114,37,91,33],[114,62,91,58],[114,64,91,60,"data"],[114,68,91,64],[114,69,91,65],[115,8,92,4],[115,15,92,11],[116,10,92,13,"success"],[116,17,92,20],[116,19,92,22],[116,23,92,26],[117,10,92,28,"shardId"],[117,17,92,35],[117,19,92,37,"shard"],[117,24,92,42],[117,25,92,43,"id"],[118,8,92,46],[118,9,92,47],[119,6,93,2],[119,7,93,3],[119,8,93,4],[119,15,93,11,"error"],[119,20,93,21],[119,22,93,23],[120,8,94,4,"console"],[120,15,94,11],[120,16,94,12,"error"],[120,21,94,17],[120,22,94,18],[120,47,94,43],[120,49,94,45,"error"],[120,54,94,50],[120,55,94,51],[121,8,95,4],[121,15,95,11],[122,10,95,13,"success"],[122,17,95,20],[122,19,95,22],[122,24,95,27],[123,10,95,29,"error"],[123,15,95,34],[123,17,95,36,"error"],[123,22,95,41],[123,23,95,42,"message"],[123,30,95,49],[123,34,95,53],[124,8,95,69],[124,9,95,70],[125,6,96,2],[126,4,97,0],[126,5,97,1],[127,4,97,1],[127,11,97,1,"_uploadShard"],[127,23,97,1],[127,24,97,1,"apply"],[127,29,97,1],[127,36,97,1,"arguments"],[127,45,97,1],[128,2,97,1],[129,2,97,1],[129,11,102,22,"uploadAllShards"],[129,26,102,37,"uploadAllShards"],[129,27,102,37,"_x3"],[129,30,102,37],[129,32,102,37,"_x4"],[129,35,102,37],[129,37,102,37,"_x5"],[129,40,102,37],[130,4,102,37],[130,11,102,37,"_uploadAllShards"],[130,27,102,37],[130,28,102,37,"apply"],[130,33,102,37],[130,40,102,37,"arguments"],[130,49,102,37],[131,2,102,37],[132,2,134,0],[133,0,135,0],[134,0,136,0],[135,2,134,0],[135,11,134,0,"_uploadAllShards"],[135,28,134,0],[136,4,134,0,"_uploadAllShards"],[136,20,134,0],[136,27,134,0,"_asyncToGenerator"],[136,44,134,0],[136,45,134,0,"default"],[136,52,134,0],[136,54,102,7],[136,65,103,2,"shards"],[136,71,103,17],[136,73,104,2,"userId"],[136,79,104,16],[136,81,105,2,"onProgress"],[136,91,105,55],[136,93,106,70],[137,6,107,2],[138,6,108,2],[138,10,108,8,"bucketCheck"],[138,21,108,19],[138,30,108,28,"checkBucketAccess"],[138,47,108,45],[138,48,108,46],[138,49,108,47],[139,6,109,2],[139,10,109,6],[139,11,109,7,"bucketCheck"],[139,22,109,18],[139,23,109,19,"success"],[139,30,109,26],[139,32,109,28],[140,8,110,4],[140,15,110,11],[141,10,110,13,"success"],[141,17,110,20],[141,19,110,22],[141,24,110,27],[142,10,110,29,"error"],[142,15,110,34],[142,17,110,36,"bucketCheck"],[142,28,110,47],[142,29,110,48,"error"],[143,8,110,54],[143,9,110,55],[144,6,111,2],[145,6,113,2],[145,10,113,8,"shardIds"],[145,18,113,26],[145,21,113,29],[145,23,113,31],[146,6,115,2,"console"],[146,13,115,9],[146,14,115,10,"log"],[146,17,115,13],[146,18,115,14],[146,40,115,36,"shards"],[146,46,115,42],[146,47,115,43,"length"],[146,53,115,49],[146,73,115,69,"userId"],[146,79,115,75],[146,81,115,77],[146,82,115,78],[147,6,117,2],[147,11,117,7],[147,15,117,11,"i"],[147,16,117,12],[147,19,117,15],[147,20,117,16],[147,22,117,18,"i"],[147,23,117,19],[147,26,117,22,"shards"],[147,32,117,28],[147,33,117,29,"length"],[147,39,117,35],[147,41,117,37,"i"],[147,42,117,38],[147,44,117,40],[147,46,117,42],[148,8,118,4],[148,12,118,10,"result"],[148,18,118,16],[148,27,118,25,"uploadShard"],[148,38,118,36],[148,39,118,37,"shards"],[148,45,118,43],[148,46,118,44,"i"],[148,47,118,45],[148,48,118,46],[148,50,118,48,"userId"],[148,56,118,54],[148,57,118,55],[149,8,120,4],[149,12,120,8],[149,13,120,9,"result"],[149,19,120,15],[149,20,120,16,"success"],[149,27,120,23],[149,29,120,25],[150,10,121,6,"console"],[150,17,121,13],[150,18,121,14,"error"],[150,23,121,19],[150,24,121,20],[150,43,121,39,"i"],[150,44,121,40],[150,47,121,43],[150,48,121,44],[150,66,121,62],[150,67,121,63],[151,10,122,6],[151,16,122,12,"cleanupShards"],[151,29,122,25],[151,30,122,26,"shardIds"],[151,38,122,34],[151,40,122,36,"userId"],[151,46,122,42],[151,47,122,43],[152,10,123,6],[152,17,123,13],[153,12,123,15,"success"],[153,19,123,22],[153,21,123,24],[153,26,123,29],[154,12,123,31,"error"],[154,17,123,36],[154,19,123,38],[154,28,123,47,"i"],[154,29,123,48],[154,32,123,51],[154,33,123,52],[154,37,123,56,"shards"],[154,43,123,62],[154,44,123,63,"length"],[154,50,123,69],[154,62,123,81,"result"],[154,68,123,87],[154,69,123,88,"error"],[154,74,123,93],[155,10,123,96],[155,11,123,97],[156,8,124,4],[157,8,126,4,"shardIds"],[157,16,126,12],[157,17,126,13,"push"],[157,21,126,17],[157,22,126,18,"result"],[157,28,126,24],[157,29,126,25,"shardId"],[157,36,126,33],[157,37,126,34],[158,8,127,4,"onProgress"],[158,18,127,14],[158,21,127,17,"i"],[158,22,127,18],[158,25,127,21],[158,26,127,22],[158,28,127,24,"shards"],[158,34,127,30],[158,35,127,31,"length"],[158,41,127,37],[158,42,127,38],[159,6,128,2],[160,6,130,2,"console"],[160,13,130,9],[160,14,130,10,"log"],[160,17,130,13],[160,18,130,14],[160,53,130,49],[160,55,130,51,"shardIds"],[160,63,130,59],[160,64,130,60],[161,6,131,2],[161,13,131,9],[162,8,131,11,"success"],[162,15,131,18],[162,17,131,20],[162,21,131,24],[163,8,131,26,"shardIds"],[164,6,131,35],[164,7,131,36],[165,4,132,0],[165,5,132,1],[166,4,132,1],[166,11,132,1,"_uploadAllShards"],[166,27,132,1],[166,28,132,1,"apply"],[166,33,132,1],[166,40,132,1,"arguments"],[166,49,132,1],[167,2,132,1],[168,2,132,1],[168,11,137,22,"downloadShard"],[168,24,137,35,"downloadShard"],[168,25,137,35,"_x6"],[168,28,137,35],[168,30,137,35,"_x7"],[168,33,137,35],[169,4,137,35],[169,11,137,35,"_downloadShard"],[169,25,137,35],[169,26,137,35,"apply"],[169,31,137,35],[169,38,137,35,"arguments"],[169,47,137,35],[170,2,137,35],[171,2,171,0],[172,0,172,0],[173,0,173,0],[174,2,171,0],[174,11,171,0,"_downloadShard"],[174,26,171,0],[175,4,171,0,"_downloadShard"],[175,18,171,0],[175,25,171,0,"_asyncToGenerator"],[175,42,171,0],[175,43,171,0,"default"],[175,50,171,0],[175,52,137,7],[175,63,138,2,"shardId"],[175,70,138,17],[175,72,139,2,"userId"],[175,78,139,16],[175,80,140,64],[176,6,141,2],[176,10,141,6],[177,8,142,4],[177,12,142,10,"supabase"],[177,20,142,18],[177,23,142,21],[177,27,142,21,"getSupabase"],[177,46,142,32],[177,47,142,32,"getSupabase"],[177,58,142,32],[177,60,142,33],[177,61,142,34],[178,8,143,4],[178,12,143,10,"filePath"],[178,20,143,18],[178,23,143,21],[178,26,143,24,"userId"],[178,32,143,30],[178,36,143,34,"shardId"],[178,43,143,41],[178,45,143,43],[179,8,145,4,"console"],[179,15,145,11],[179,16,145,12,"log"],[179,19,145,15],[179,20,145,16],[179,46,145,42,"filePath"],[179,54,145,50],[179,56,145,52],[179,57,145,53],[180,8,147,4],[180,12,147,4,"_yield$supabase$stora3"],[180,34,147,4],[180,43,147,34,"supabase"],[180,51,147,42],[180,52,147,43,"storage"],[180,59,147,50],[180,60,148,7,"from"],[180,64,148,11],[180,65,148,12,"STORAGE_BUCKET"],[180,84,148,26],[180,85,148,26,"STORAGE_BUCKET"],[180,99,148,26],[180,100,148,27],[180,101,149,7,"download"],[180,109,149,15],[180,110,149,16,"filePath"],[180,118,149,24],[180,119,149,25],[181,10,147,12,"data"],[181,14,147,16],[181,17,147,16,"_yield$supabase$stora3"],[181,39,147,16],[181,40,147,12,"data"],[181,44,147,16],[182,10,147,18,"error"],[182,15,147,23],[182,18,147,23,"_yield$supabase$stora3"],[182,40,147,23],[182,41,147,18,"error"],[182,46,147,23],[183,8,151,4],[183,12,151,8,"error"],[183,17,151,13],[183,19,151,15],[184,10,152,6,"console"],[184,17,152,13],[184,18,152,14,"error"],[184,23,152,19],[184,24,152,20],[184,47,152,43],[184,49,152,45,"error"],[184,54,152,50],[184,55,152,51],[185,10,153,6],[185,17,153,13],[186,12,153,15,"success"],[186,19,153,22],[186,21,153,24],[186,26,153,29],[187,12,153,31,"error"],[187,17,153,36],[187,19,153,38,"error"],[187,24,153,43],[187,25,153,44,"message"],[188,10,153,52],[188,11,153,53],[189,8,154,4],[190,8,156,4],[190,12,156,8],[190,13,156,9,"data"],[190,17,156,13],[190,19,156,15],[191,10,157,6],[191,17,157,13],[192,12,157,15,"success"],[192,19,157,22],[192,21,157,24],[192,26,157,29],[193,12,157,31,"error"],[193,17,157,36],[193,19,157,38],[194,10,157,57],[194,11,157,58],[195,8,158,4],[197,8,160,4],[198,8,161,4],[198,12,161,10,"text"],[198,16,161,14],[198,25,161,23,"data"],[198,29,161,27],[198,30,161,28,"text"],[198,34,161,32],[198,35,161,33],[198,36,161,34],[199,8,163,4,"console"],[199,15,163,11],[199,16,163,12,"log"],[199,19,163,15],[199,20,163,16],[199,29,163,25,"shardId"],[199,36,163,32],[199,58,163,54,"text"],[199,62,163,58],[199,63,163,59,"length"],[199,69,163,65],[199,71,163,67],[199,72,163,68],[200,8,164,4],[200,15,164,11],[201,10,164,13,"success"],[201,17,164,20],[201,19,164,22],[201,23,164,26],[202,10,164,28,"data"],[202,14,164,32],[202,16,164,34,"text"],[203,8,164,39],[203,9,164,40],[204,6,165,2],[204,7,165,3],[204,8,165,4],[204,15,165,11,"error"],[204,20,165,21],[204,22,165,23],[205,8,166,4,"console"],[205,15,166,11],[205,16,166,12,"error"],[205,21,166,17],[205,22,166,18],[205,49,166,45],[205,51,166,47,"error"],[205,56,166,52],[205,57,166,53],[206,8,167,4],[206,15,167,11],[207,10,167,13,"success"],[207,17,167,20],[207,19,167,22],[207,24,167,27],[208,10,167,29,"error"],[208,15,167,34],[208,17,167,36,"error"],[208,22,167,41],[208,23,167,42,"message"],[208,30,167,49],[208,34,167,53],[209,8,167,71],[209,9,167,72],[210,6,168,2],[211,4,169,0],[211,5,169,1],[212,4,169,1],[212,11,169,1,"_downloadShard"],[212,25,169,1],[212,26,169,1,"apply"],[212,31,169,1],[212,38,169,1,"arguments"],[212,47,169,1],[213,2,169,1],[214,2,169,1],[214,11,174,22,"downloadAllShards"],[214,28,174,39,"downloadAllShards"],[214,29,174,39,"_x8"],[214,32,174,39],[214,34,174,39,"_x9"],[214,37,174,39],[214,39,174,39,"_x0"],[214,42,174,39],[214,44,174,39,"_x1"],[214,47,174,39],[215,4,174,39],[215,11,174,39,"_downloadAllShards"],[215,29,174,39],[215,30,174,39,"apply"],[215,35,174,39],[215,42,174,39,"arguments"],[215,51,174,39],[216,2,174,39],[217,2,204,0],[218,0,205,0],[219,0,206,0],[220,2,204,0],[220,11,204,0,"_downloadAllShards"],[220,30,204,0],[221,4,204,0,"_downloadAllShards"],[221,22,204,0],[221,29,204,0,"_asyncToGenerator"],[221,46,204,0],[221,47,204,0,"default"],[221,54,204,0],[221,56,174,7],[221,67,175,2,"shardIds"],[221,75,175,20],[221,77,176,2,"indices"],[221,84,176,19],[221,86,177,2,"userId"],[221,92,177,16],[221,94,178,2,"onProgress"],[221,104,178,55],[221,106,179,67],[222,6,180,2],[222,10,180,8,"shards"],[222,16,180,23],[222,19,180,26],[222,21,180,28],[223,6,182,2,"console"],[223,13,182,9],[223,14,182,10,"log"],[223,17,182,13],[223,18,182,14],[223,42,182,38,"shardIds"],[223,50,182,46],[223,51,182,47,"length"],[223,57,182,53],[223,66,182,62],[223,67,182,63],[224,6,184,2],[224,11,184,7],[224,15,184,11,"i"],[224,16,184,12],[224,19,184,15],[224,20,184,16],[224,22,184,18,"i"],[224,23,184,19],[224,26,184,22,"shardIds"],[224,34,184,30],[224,35,184,31,"length"],[224,41,184,37],[224,43,184,39,"i"],[224,44,184,40],[224,46,184,42],[224,48,184,44],[225,8,185,4],[225,12,185,10,"result"],[225,18,185,16],[225,27,185,25,"downloadShard"],[225,40,185,38],[225,41,185,39,"shardIds"],[225,49,185,47],[225,50,185,48,"i"],[225,51,185,49],[225,52,185,50],[225,54,185,52,"userId"],[225,60,185,58],[225,61,185,59],[226,8,187,4],[226,12,187,8],[226,13,187,9,"result"],[226,19,187,15],[226,20,187,16,"success"],[226,27,187,23],[226,29,187,25],[227,10,188,6],[227,17,188,13],[228,12,188,15,"success"],[228,19,188,22],[228,21,188,24],[228,26,188,29],[229,12,188,31,"error"],[229,17,188,36],[229,19,188,38],[229,47,188,66,"i"],[229,48,188,67],[229,51,188,70],[229,52,188,71],[229,57,188,76,"result"],[229,63,188,82],[229,64,188,83,"error"],[229,69,188,88],[230,10,188,91],[230,11,188,92],[231,8,189,4],[232,8,191,4,"shards"],[232,14,191,10],[232,15,191,11,"push"],[232,19,191,15],[232,20,191,16],[233,10,192,6,"id"],[233,12,192,8],[233,14,192,10,"shardIds"],[233,22,192,18],[233,23,192,19,"i"],[233,24,192,20],[233,25,192,21],[234,10,193,6,"data"],[234,14,193,10],[234,16,193,12,"result"],[234,22,193,18],[234,23,193,19,"data"],[234,27,193,24],[235,10,194,6,"index"],[235,15,194,11],[235,17,194,13,"indices"],[235,24,194,20],[235,25,194,21,"i"],[235,26,194,22],[236,8,195,4],[236,9,195,5],[236,10,195,6],[237,8,197,4,"onProgress"],[237,18,197,14],[237,21,197,17,"i"],[237,22,197,18],[237,25,197,21],[237,26,197,22],[237,28,197,24,"shardIds"],[237,36,197,32],[237,37,197,33,"length"],[237,43,197,39],[237,44,197,40],[238,6,198,2],[239,6,200,2,"console"],[239,13,200,9],[239,14,200,10,"log"],[239,17,200,13],[239,18,200,14],[239,54,200,50],[239,55,200,51],[240,6,201,2],[240,13,201,9],[241,8,201,11,"success"],[241,15,201,18],[241,17,201,20],[241,21,201,24],[242,8,201,26,"shards"],[243,6,201,33],[243,7,201,34],[244,4,202,0],[244,5,202,1],[245,4,202,1],[245,11,202,1,"_downloadAllShards"],[245,29,202,1],[245,30,202,1,"apply"],[245,35,202,1],[245,42,202,1,"arguments"],[245,51,202,1],[246,2,202,1],[247,2,202,1],[247,11,207,22,"cleanupShards"],[247,24,207,35,"cleanupShards"],[247,25,207,35,"_x10"],[247,29,207,35],[247,31,207,35,"_x11"],[247,35,207,35],[248,4,207,35],[248,11,207,35,"_cleanupShards"],[248,25,207,35],[248,26,207,35,"apply"],[248,31,207,35],[248,38,207,35,"arguments"],[248,47,207,35],[249,2,207,35],[250,2,220,0],[251,0,221,0],[252,0,222,0],[253,2,220,0],[253,11,220,0,"_cleanupShards"],[253,26,220,0],[254,4,220,0,"_cleanupShards"],[254,18,220,0],[254,25,220,0,"_asyncToGenerator"],[254,42,220,0],[254,43,220,0,"default"],[254,50,220,0],[254,52,207,7],[254,63,208,2,"shardIds"],[254,71,208,20],[254,73,209,2,"userId"],[254,79,209,16],[254,81,210,17],[255,6,211,2],[255,10,211,6],[256,8,212,4],[256,12,212,10,"supabase"],[256,20,212,18],[256,23,212,21],[256,27,212,21,"getSupabase"],[256,46,212,32],[256,47,212,32,"getSupabase"],[256,58,212,32],[256,60,212,33],[256,61,212,34],[257,8,213,4],[257,12,213,10,"filePaths"],[257,21,213,19],[257,24,213,22,"shardIds"],[257,32,213,30],[257,33,213,31,"map"],[257,36,213,34],[257,37,213,35,"id"],[257,39,213,37],[257,43,213,41],[257,46,213,44,"userId"],[257,52,213,50],[257,56,213,54,"id"],[257,58,213,56],[257,60,213,58],[257,61,213,59],[258,8,214,4],[258,14,214,10,"supabase"],[258,22,214,18],[258,23,214,19,"storage"],[258,30,214,26],[258,31,214,27,"from"],[258,35,214,31],[258,36,214,32,"STORAGE_BUCKET"],[258,55,214,46],[258,56,214,46,"STORAGE_BUCKET"],[258,70,214,46],[258,71,214,47],[258,72,214,48,"remove"],[258,78,214,54],[258,79,214,55,"filePaths"],[258,88,214,64],[258,89,214,65],[259,6,215,2],[259,7,215,3],[259,8,215,4],[259,15,215,11,"error"],[259,20,215,16],[259,22,215,18],[260,8,216,4,"console"],[260,15,216,11],[260,16,216,12,"error"],[260,21,216,17],[260,22,216,18],[260,49,216,45],[260,51,216,47,"error"],[260,56,216,52],[260,57,216,53],[261,6,217,2],[262,4,218,0],[262,5,218,1],[263,4,218,1],[263,11,218,1,"_cleanupShards"],[263,25,218,1],[263,26,218,1,"apply"],[263,31,218,1],[263,38,218,1,"arguments"],[263,47,218,1],[264,2,218,1],[265,2,218,1],[265,11,223,22,"deleteDocumentShards"],[265,31,223,42,"deleteDocumentShards"],[265,32,223,42,"_x12"],[265,36,223,42],[265,38,223,42,"_x13"],[265,42,223,42],[266,4,223,42],[266,11,223,42,"_deleteDocumentShards"],[266,32,223,42],[266,33,223,42,"apply"],[266,38,223,42],[266,45,223,42,"arguments"],[266,54,223,42],[267,2,223,42],[268,2,223,42],[268,11,223,42,"_deleteDocumentShards"],[268,33,223,42],[269,4,223,42,"_deleteDocumentShards"],[269,25,223,42],[269,32,223,42,"_asyncToGenerator"],[269,49,223,42],[269,50,223,42,"default"],[269,57,223,42],[269,59,223,7],[269,70,224,2,"shardIds"],[269,78,224,20],[269,80,225,2,"userId"],[269,86,225,16],[269,88,226,49],[270,6,227,2],[270,10,227,6],[271,8,228,4],[271,12,228,10,"supabase"],[271,20,228,18],[271,23,228,21],[271,27,228,21,"getSupabase"],[271,46,228,32],[271,47,228,32,"getSupabase"],[271,58,228,32],[271,60,228,33],[271,61,228,34],[272,8,229,4],[272,12,229,10,"filePaths"],[272,21,229,19],[272,24,229,22,"shardIds"],[272,32,229,30],[272,33,229,31,"map"],[272,36,229,34],[272,37,229,35,"id"],[272,39,229,37],[272,43,229,41],[272,46,229,44,"userId"],[272,52,229,50],[272,56,229,54,"id"],[272,58,229,56],[272,60,229,58],[272,61,229,59],[273,8,230,4],[273,12,230,4,"_yield$supabase$stora4"],[273,34,230,4],[273,43,230,28,"supabase"],[273,51,230,36],[273,52,230,37,"storage"],[273,59,230,44],[273,60,230,45,"from"],[273,64,230,49],[273,65,230,50,"STORAGE_BUCKET"],[273,84,230,64],[273,85,230,64,"STORAGE_BUCKET"],[273,99,230,64],[273,100,230,65],[273,101,230,66,"remove"],[273,107,230,72],[273,108,230,73,"filePaths"],[273,117,230,82],[273,118,230,83],[274,10,230,12,"error"],[274,15,230,17],[274,18,230,17,"_yield$supabase$stora4"],[274,40,230,17],[274,41,230,12,"error"],[274,46,230,17],[275,8,232,4],[275,12,232,8,"error"],[275,17,232,13],[275,19,232,15],[276,10,233,6],[276,17,233,13],[277,12,233,15,"success"],[277,19,233,22],[277,21,233,24],[277,26,233,29],[278,12,233,31,"error"],[278,17,233,36],[278,19,233,38,"error"],[278,24,233,43],[278,25,233,44,"message"],[279,10,233,52],[279,11,233,53],[280,8,234,4],[281,8,236,4],[281,15,236,11],[282,10,236,13,"success"],[282,17,236,20],[282,19,236,22],[283,8,236,27],[283,9,236,28],[284,6,237,2],[284,7,237,3],[284,8,237,4],[284,15,237,11,"error"],[284,20,237,21],[284,22,237,23],[285,8,238,4],[285,15,238,11],[286,10,238,13,"success"],[286,17,238,20],[286,19,238,22],[286,24,238,27],[287,10,238,29,"error"],[287,15,238,34],[287,17,238,36,"error"],[287,22,238,41],[287,23,238,42,"message"],[287,30,238,49],[287,34,238,53],[288,8,238,69],[288,9,238,70],[289,6,239,2],[290,4,240,0],[290,5,240,1],[291,4,240,1],[291,11,240,1,"_deleteDocumentShards"],[291,32,240,1],[291,33,240,1,"apply"],[291,38,240,1],[291,45,240,1,"arguments"],[291,54,240,1],[292,2,240,1],[293,0,240,1],[293,3]],"functionMap":{"names":["<global>","checkBucketAccess","uploadShard","uploadAllShards","downloadShard","downloadAllShards","cleanupShards","shardIds.map$argument_0","deleteDocumentShards"],"mappings":"AAA;OCgB;CDmB;OEM;CFuD;OGK;CH8B;OIK;CJgC;OKK;CL4B;OMK;mCCM,uBD;CNK;OQK;mCDM,uBC;CRW"},"hasCjsExports":false},"type":"js/module"}]}