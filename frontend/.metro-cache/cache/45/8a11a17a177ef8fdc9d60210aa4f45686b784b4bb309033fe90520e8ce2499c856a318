{"dependencies":[{"name":"expo-file-system/legacy","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":132},"end":{"line":5,"column":54,"index":186}}],"key":"hYqFhoW7zWgYTBVE1SkA0/XFH/Y=","exportNames":["*"],"imports":1}},{"name":"expo-document-picker","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":187},"end":{"line":6,"column":55,"index":242}}],"key":"NWjULt4J8GGUdXN68lY2F08+J7M=","exportNames":["*"],"imports":1}},{"name":"../crypto/encryption","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":243},"end":{"line":7,"column":72,"index":315}}],"key":"G9ko50kaVyDire/HVmN7r+PYfAA=","exportNames":["*"],"imports":1}},{"name":"../crypto/sharding","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":8,"column":0,"index":316},"end":{"line":8,"column":78,"index":394}}],"key":"VX4W0gAr3QgcHHGKjkwXVL63nRs=","exportNames":["*"],"imports":1}},{"name":"./storageService","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":9,"column":0,"index":395},"end":{"line":9,"column":92,"index":487}}],"key":"dpTZbh2G1/oPAs9fGfVAUGNDXgM=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  exports.pickDocument = pickDocument;\n  exports.uploadDocument = uploadDocument;\n  exports.downloadDocument = downloadDocument;\n  exports.deleteDocument = deleteDocument;\n  var _expoFileSystemLegacy = require(_dependencyMap[0], \"expo-file-system/legacy\");\n  var FileSystem = _interopNamespace(_expoFileSystemLegacy);\n  var _expoDocumentPicker = require(_dependencyMap[1], \"expo-document-picker\");\n  var DocumentPicker = _interopNamespace(_expoDocumentPicker);\n  var _cryptoEncryption = require(_dependencyMap[2], \"../crypto/encryption\");\n  var _cryptoSharding = require(_dependencyMap[3], \"../crypto/sharding\");\n  var _storageService = require(_dependencyMap[4], \"./storageService\");\n  // Vault Service - Zero Knowledge Vault\n  // Orchestrates encryption, sharding, upload/download\n  // All operations happen client-side\n\n  // Simple UUID generator\n  function generateUUID() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n      const r = Math.random() * 16 | 0;\n      const v = c === 'x' ? r : r & 0x3 | 0x8;\n      return v.toString(16);\n    });\n  }\n  /**\n   * Pick a document from device\n   */\n  async function pickDocument() {\n    try {\n      const result = await DocumentPicker.getDocumentAsync({\n        type: ['application/pdf', 'image/*'],\n        copyToCacheDirectory: true\n      });\n      if (result.canceled) {\n        return {\n          success: false,\n          error: 'Cancelled'\n        };\n      }\n      const file = result.assets[0];\n      console.log('Picked file:', file);\n      return {\n        success: true,\n        uri: file.uri,\n        name: file.name,\n        mimeType: file.mimeType || 'application/octet-stream',\n        size: file.size\n      };\n    } catch (error) {\n      console.error('Document picker error:', error);\n      return {\n        success: false,\n        error: error.message || 'Failed to pick document'\n      };\n    }\n  }\n\n  /**\n   * Read file content as base64\n   */\n  async function readFileAsBase64(uri) {\n    try {\n      console.log('Reading file from:', uri);\n\n      // Check if file exists\n      const fileInfo = await FileSystem.getInfoAsync(uri);\n      console.log('File info:', fileInfo);\n      if (!fileInfo.exists) {\n        throw new Error('File does not exist');\n      }\n\n      // Read file as base64 - use string directly instead of enum\n      const content = await FileSystem.readAsStringAsync(uri, {\n        encoding: 'base64'\n      });\n      console.log('File read successfully, length:', content.length);\n      return content;\n    } catch (error) {\n      console.error('Error reading file:', error);\n      throw new Error(`Failed to read file: ${error.message}`);\n    }\n  }\n\n  /**\n   * Encrypt and upload a document\n   * Full pipeline: read → encrypt → shard → upload\n   */\n  async function uploadDocument(uri, name, mimeType, size, masterKey, userId, onProgress) {\n    try {\n      console.log('=== Starting document upload ===');\n      console.log('URI:', uri);\n      console.log('Name:', name);\n      console.log('Size:', size);\n      console.log('User:', userId);\n\n      // Stage 1: Read file as base64\n      onProgress?.({\n        stage: 'encrypting',\n        progress: 0\n      });\n      let fileContent;\n      try {\n        fileContent = await readFileAsBase64(uri);\n      } catch (readError) {\n        console.error('File read error:', readError);\n        return {\n          success: false,\n          error: `File read error: ${readError.message}`\n        };\n      }\n      if (!fileContent || fileContent.length === 0) {\n        return {\n          success: false,\n          error: 'File is empty or could not be read'\n        };\n      }\n      console.log('File content length:', fileContent.length);\n      onProgress?.({\n        stage: 'encrypting',\n        progress: 30\n      });\n\n      // Stage 2: Encrypt document\n      console.log('Encrypting document...');\n      const encryptionResult = await (0, _cryptoEncryption.encryptDocument)(fileContent, masterKey);\n      console.log('Encryption complete');\n      onProgress?.({\n        stage: 'encrypting',\n        progress: 60\n      });\n\n      // Combine encrypted data with metadata for sharding\n      const encryptedPayload = JSON.stringify({\n        data: encryptionResult.encryptedData,\n        dataIV: encryptionResult.dataIV\n      });\n      console.log('Encrypted payload length:', encryptedPayload.length);\n      onProgress?.({\n        stage: 'sharding',\n        progress: 70\n      });\n\n      // Stage 3: Split into shards\n      console.log('Splitting into shards...');\n      const shards = (0, _cryptoSharding.splitIntoShards)(encryptedPayload);\n      console.log('Created', shards.length, 'shards');\n      onProgress?.({\n        stage: 'sharding',\n        progress: 80\n      });\n\n      // Stage 4: Upload shards\n      console.log('Uploading shards...');\n      onProgress?.({\n        stage: 'uploading',\n        progress: 0,\n        currentShard: 0,\n        totalShards: shards.length\n      });\n      const uploadResult = await (0, _storageService.uploadAllShards)(shards, userId, (current, total) => {\n        console.log(`Uploaded shard ${current}/${total}`);\n        onProgress?.({\n          stage: 'uploading',\n          progress: Math.round(current / total * 100),\n          currentShard: current,\n          totalShards: total\n        });\n      });\n      if (!uploadResult.success) {\n        console.error('Upload failed:', uploadResult.error);\n        return {\n          success: false,\n          error: uploadResult.error\n        };\n      }\n      console.log('All shards uploaded:', uploadResult.shardIds);\n\n      // Create document metadata (stored locally only)\n      const document = {\n        id: generateUUID(),\n        name,\n        type: mimeType.startsWith('image/') ? 'image' : 'pdf',\n        mimeType,\n        size,\n        createdAt: Date.now(),\n        shardIds: uploadResult.shardIds,\n        encryptedFEK: encryptionResult.encryptedFEK,\n        iv: encryptionResult.fekIV\n      };\n\n      // Store shard indices locally (needed for reassembly)\n      const shardIndices = shards.map((s, i) => ({\n        id: s.id,\n        index: i\n      }));\n      document.shardIndices = shardIndices;\n      console.log('=== Upload complete ===');\n      return {\n        success: true,\n        document\n      };\n    } catch (error) {\n      console.error('Upload exception:', error);\n      return {\n        success: false,\n        error: error.message || 'Upload failed'\n      };\n    }\n  }\n\n  /**\n   * Download and decrypt a document\n   * Full pipeline: download shards → reassemble → decrypt → return in memory\n   */\n  async function downloadDocument(document, masterKey, userId, onProgress) {\n    try {\n      // Stage 1: Download all shards\n      onProgress?.({\n        stage: 'uploading',\n        progress: 0,\n        currentShard: 0,\n        totalShards: document.shardIds.length\n      });\n      const shardIndices = document.shardIndices || document.shardIds.map((id, i) => ({\n        id,\n        index: i\n      }));\n      const indices = shardIndices.map(s => s.index);\n      const downloadResult = await (0, _storageService.downloadAllShards)(document.shardIds, indices, userId, (current, total) => {\n        onProgress?.({\n          stage: 'uploading',\n          progress: Math.round(current / total * 100),\n          currentShard: current,\n          totalShards: total\n        });\n      });\n      if (!downloadResult.success) {\n        return {\n          success: false,\n          error: downloadResult.error\n        };\n      }\n\n      // Stage 2: Reassemble shards\n      onProgress?.({\n        stage: 'sharding',\n        progress: 50\n      });\n      const encryptedPayload = (0, _cryptoSharding.reassembleShards)(downloadResult.shards);\n      const {\n        data: encryptedData,\n        dataIV\n      } = JSON.parse(encryptedPayload);\n\n      // Stage 3: Decrypt document\n      onProgress?.({\n        stage: 'encrypting',\n        progress: 75\n      });\n      const decryptedData = (0, _cryptoEncryption.decryptDocument)(encryptedData, document.encryptedFEK, document.iv, dataIV, masterKey);\n      if (!decryptedData) {\n        return {\n          success: false,\n          error: 'Decryption failed - invalid key or corrupted data'\n        };\n      }\n      onProgress?.({\n        stage: 'encrypting',\n        progress: 100\n      });\n      return {\n        success: true,\n        data: decryptedData,\n        // Base64 encoded\n        mimeType: document.mimeType\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: error.message || 'Download failed'\n      };\n    }\n  }\n\n  /**\n   * Delete a document from cloud and local metadata\n   */\n  async function deleteDocument(document, userId) {\n    return (0, _storageService.deleteDocumentShards)(document.shardIds, userId);\n  }\n});","lineCount":311,"map":[[22,2,30,0,"exports"],[22,9,30,0],[22,10,30,0,"pickDocument"],[22,22,30,0],[22,25,30,0,"pickDocument"],[22,37,30,0],[23,2,96,0,"exports"],[23,9,96,0],[23,10,96,0,"uploadDocument"],[23,24,96,0],[23,27,96,0,"uploadDocument"],[23,41,96,0],[24,2,203,0,"exports"],[24,9,203,0],[24,10,203,0,"downloadDocument"],[24,26,203,0],[24,29,203,0,"downloadDocument"],[24,45,203,0],[25,2,270,0,"exports"],[25,9,270,0],[25,10,270,0,"deleteDocument"],[25,24,270,0],[25,27,270,0,"deleteDocument"],[25,41,270,0],[26,2,5,0],[26,6,5,0,"_expoFileSystemLegacy"],[26,27,5,0],[26,30,5,0,"require"],[26,37,5,0],[26,38,5,0,"_dependencyMap"],[26,52,5,0],[27,2,5,0],[27,6,5,0,"FileSystem"],[27,16,5,0],[27,19,5,0,"_interopNamespace"],[27,36,5,0],[27,37,5,0,"_expoFileSystemLegacy"],[27,58,5,0],[28,2,6,0],[28,6,6,0,"_expoDocumentPicker"],[28,25,6,0],[28,28,6,0,"require"],[28,35,6,0],[28,36,6,0,"_dependencyMap"],[28,50,6,0],[29,2,6,0],[29,6,6,0,"DocumentPicker"],[29,20,6,0],[29,23,6,0,"_interopNamespace"],[29,40,6,0],[29,41,6,0,"_expoDocumentPicker"],[29,60,6,0],[30,2,7,0],[30,6,7,0,"_cryptoEncryption"],[30,23,7,0],[30,26,7,0,"require"],[30,33,7,0],[30,34,7,0,"_dependencyMap"],[30,48,7,0],[31,2,8,0],[31,6,8,0,"_cryptoSharding"],[31,21,8,0],[31,24,8,0,"require"],[31,31,8,0],[31,32,8,0,"_dependencyMap"],[31,46,8,0],[32,2,9,0],[32,6,9,0,"_storageService"],[32,21,9,0],[32,24,9,0,"require"],[32,31,9,0],[32,32,9,0,"_dependencyMap"],[32,46,9,0],[33,2,1,0],[34,2,2,0],[35,2,3,0],[37,2,12,0],[38,2,13,0],[38,11,13,9,"generateUUID"],[38,23,13,21,"generateUUID"],[38,24,13,21],[38,26,13,32],[39,4,14,2],[39,11,14,9],[39,49,14,47],[39,50,14,48,"replace"],[39,57,14,55],[39,58,14,56],[39,65,14,63],[39,67,14,65],[39,77,14,74,"c"],[39,78,14,75],[39,80,14,77],[40,6,15,4],[40,12,15,10,"r"],[40,13,15,11],[40,16,15,14,"Math"],[40,20,15,18],[40,21,15,19,"random"],[40,27,15,25],[40,28,15,26],[40,29,15,27],[40,32,15,30],[40,34,15,32],[40,37,15,35],[40,38,15,36],[41,6,16,4],[41,12,16,10,"v"],[41,13,16,11],[41,16,16,14,"c"],[41,17,16,15],[41,22,16,20],[41,25,16,23],[41,28,16,26,"r"],[41,29,16,27],[41,32,16,31,"r"],[41,33,16,32],[41,36,16,35],[41,39,16,38],[41,42,16,41],[41,45,16,45],[42,6,17,4],[42,13,17,11,"v"],[42,14,17,12],[42,15,17,13,"toString"],[42,23,17,21],[42,24,17,22],[42,26,17,24],[42,27,17,25],[43,4,18,2],[43,5,18,3],[43,6,18,4],[44,2,19,0],[45,2,27,0],[46,0,28,0],[47,0,29,0],[48,2,30,7],[48,17,30,22,"pickDocument"],[48,29,30,34,"pickDocument"],[48,30,30,34],[48,32,37,3],[49,4,38,2],[49,8,38,6],[50,6,39,4],[50,12,39,10,"result"],[50,18,39,16],[50,21,39,19],[50,27,39,25,"DocumentPicker"],[50,41,39,39],[50,42,39,40,"getDocumentAsync"],[50,58,39,56],[50,59,39,57],[51,8,40,6,"type"],[51,12,40,10],[51,14,40,12],[51,15,40,13],[51,32,40,30],[51,34,40,32],[51,43,40,41],[51,44,40,42],[52,8,41,6,"copyToCacheDirectory"],[52,28,41,26],[52,30,41,28],[53,6,42,4],[53,7,42,5],[53,8,42,6],[54,6,44,4],[54,10,44,8,"result"],[54,16,44,14],[54,17,44,15,"canceled"],[54,25,44,23],[54,27,44,25],[55,8,45,6],[55,15,45,13],[56,10,45,15,"success"],[56,17,45,22],[56,19,45,24],[56,24,45,29],[57,10,45,31,"error"],[57,15,45,36],[57,17,45,38],[58,8,45,50],[58,9,45,51],[59,6,46,4],[60,6,48,4],[60,12,48,10,"file"],[60,16,48,14],[60,19,48,17,"result"],[60,25,48,23],[60,26,48,24,"assets"],[60,32,48,30],[60,33,48,31],[60,34,48,32],[60,35,48,33],[61,6,49,4,"console"],[61,13,49,11],[61,14,49,12,"log"],[61,17,49,15],[61,18,49,16],[61,32,49,30],[61,34,49,32,"file"],[61,38,49,36],[61,39,49,37],[62,6,51,4],[62,13,51,11],[63,8,52,6,"success"],[63,15,52,13],[63,17,52,15],[63,21,52,19],[64,8,53,6,"uri"],[64,11,53,9],[64,13,53,11,"file"],[64,17,53,15],[64,18,53,16,"uri"],[64,21,53,19],[65,8,54,6,"name"],[65,12,54,10],[65,14,54,12,"file"],[65,18,54,16],[65,19,54,17,"name"],[65,23,54,21],[66,8,55,6,"mimeType"],[66,16,55,14],[66,18,55,16,"file"],[66,22,55,20],[66,23,55,21,"mimeType"],[66,31,55,29],[66,35,55,33],[66,61,55,59],[67,8,56,6,"size"],[67,12,56,10],[67,14,56,12,"file"],[67,18,56,16],[67,19,56,17,"size"],[68,6,57,4],[68,7,57,5],[69,4,58,2],[69,5,58,3],[69,6,58,4],[69,13,58,11,"error"],[69,18,58,21],[69,20,58,23],[70,6,59,4,"console"],[70,13,59,11],[70,14,59,12,"error"],[70,19,59,17],[70,20,59,18],[70,44,59,42],[70,46,59,44,"error"],[70,51,59,49],[70,52,59,50],[71,6,60,4],[71,13,60,11],[72,8,60,13,"success"],[72,15,60,20],[72,17,60,22],[72,22,60,27],[73,8,60,29,"error"],[73,13,60,34],[73,15,60,36,"error"],[73,20,60,41],[73,21,60,42,"message"],[73,28,60,49],[73,32,60,53],[74,6,60,79],[74,7,60,80],[75,4,61,2],[76,2,62,0],[78,2,64,0],[79,0,65,0],[80,0,66,0],[81,2,67,0],[81,17,67,15,"readFileAsBase64"],[81,33,67,31,"readFileAsBase64"],[81,34,67,32,"uri"],[81,37,67,43],[81,39,67,62],[82,4,68,2],[82,8,68,6],[83,6,69,4,"console"],[83,13,69,11],[83,14,69,12,"log"],[83,17,69,15],[83,18,69,16],[83,38,69,36],[83,40,69,38,"uri"],[83,43,69,41],[83,44,69,42],[85,6,71,4],[86,6,72,4],[86,12,72,10,"fileInfo"],[86,20,72,18],[86,23,72,21],[86,29,72,27,"FileSystem"],[86,39,72,37],[86,40,72,38,"getInfoAsync"],[86,52,72,50],[86,53,72,51,"uri"],[86,56,72,54],[86,57,72,55],[87,6,73,4,"console"],[87,13,73,11],[87,14,73,12,"log"],[87,17,73,15],[87,18,73,16],[87,30,73,28],[87,32,73,30,"fileInfo"],[87,40,73,38],[87,41,73,39],[88,6,75,4],[88,10,75,8],[88,11,75,9,"fileInfo"],[88,19,75,17],[88,20,75,18,"exists"],[88,26,75,24],[88,28,75,26],[89,8,76,6],[89,14,76,12],[89,18,76,16,"Error"],[89,23,76,21],[89,24,76,22],[89,45,76,43],[89,46,76,44],[90,6,77,4],[92,6,79,4],[93,6,80,4],[93,12,80,10,"content"],[93,19,80,17],[93,22,80,20],[93,28,80,26,"FileSystem"],[93,38,80,36],[93,39,80,37,"readAsStringAsync"],[93,56,80,54],[93,57,80,55,"uri"],[93,60,80,58],[93,62,80,60],[94,8,81,6,"encoding"],[94,16,81,14],[94,18,81,16],[95,6,82,4],[95,7,82,5],[95,8,82,6],[96,6,84,4,"console"],[96,13,84,11],[96,14,84,12,"log"],[96,17,84,15],[96,18,84,16],[96,51,84,49],[96,53,84,51,"content"],[96,60,84,58],[96,61,84,59,"length"],[96,67,84,65],[96,68,84,66],[97,6,85,4],[97,13,85,11,"content"],[97,20,85,18],[98,4,86,2],[98,5,86,3],[98,6,86,4],[98,13,86,11,"error"],[98,18,86,21],[98,20,86,23],[99,6,87,4,"console"],[99,13,87,11],[99,14,87,12,"error"],[99,19,87,17],[99,20,87,18],[99,41,87,39],[99,43,87,41,"error"],[99,48,87,46],[99,49,87,47],[100,6,88,4],[100,12,88,10],[100,16,88,14,"Error"],[100,21,88,19],[100,22,88,20],[100,46,88,44,"error"],[100,51,88,49],[100,52,88,50,"message"],[100,59,88,57],[100,61,88,59],[100,62,88,60],[101,4,89,2],[102,2,90,0],[104,2,92,0],[105,0,93,0],[106,0,94,0],[107,0,95,0],[108,2,96,7],[108,17,96,22,"uploadDocument"],[108,31,96,36,"uploadDocument"],[108,32,97,2,"uri"],[108,35,97,13],[108,37,98,2,"name"],[108,41,98,14],[108,43,99,2,"mimeType"],[108,51,99,18],[108,53,100,2,"size"],[108,57,100,14],[108,59,101,2,"masterKey"],[108,68,101,19],[108,70,102,2,"userId"],[108,76,102,16],[108,78,103,2,"onProgress"],[108,88,103,49],[108,90,104,33],[109,4,105,2],[109,8,105,6],[110,6,106,4,"console"],[110,13,106,11],[110,14,106,12,"log"],[110,17,106,15],[110,18,106,16],[110,52,106,50],[110,53,106,51],[111,6,107,4,"console"],[111,13,107,11],[111,14,107,12,"log"],[111,17,107,15],[111,18,107,16],[111,24,107,22],[111,26,107,24,"uri"],[111,29,107,27],[111,30,107,28],[112,6,108,4,"console"],[112,13,108,11],[112,14,108,12,"log"],[112,17,108,15],[112,18,108,16],[112,25,108,23],[112,27,108,25,"name"],[112,31,108,29],[112,32,108,30],[113,6,109,4,"console"],[113,13,109,11],[113,14,109,12,"log"],[113,17,109,15],[113,18,109,16],[113,25,109,23],[113,27,109,25,"size"],[113,31,109,29],[113,32,109,30],[114,6,110,4,"console"],[114,13,110,11],[114,14,110,12,"log"],[114,17,110,15],[114,18,110,16],[114,25,110,23],[114,27,110,25,"userId"],[114,33,110,31],[114,34,110,32],[116,6,112,4],[117,6,113,4,"onProgress"],[117,16,113,14],[117,19,113,17],[118,8,113,19,"stage"],[118,13,113,24],[118,15,113,26],[118,27,113,38],[119,8,113,40,"progress"],[119,16,113,48],[119,18,113,50],[120,6,113,52],[120,7,113,53],[120,8,113,54],[121,6,115,4],[121,10,115,8,"fileContent"],[121,21,115,27],[122,6,116,4],[122,10,116,8],[123,8,117,6,"fileContent"],[123,19,117,17],[123,22,117,20],[123,28,117,26,"readFileAsBase64"],[123,44,117,42],[123,45,117,43,"uri"],[123,48,117,46],[123,49,117,47],[124,6,118,4],[124,7,118,5],[124,8,118,6],[124,15,118,13,"readError"],[124,24,118,27],[124,26,118,29],[125,8,119,6,"console"],[125,15,119,13],[125,16,119,14,"error"],[125,21,119,19],[125,22,119,20],[125,40,119,38],[125,42,119,40,"readError"],[125,51,119,49],[125,52,119,50],[126,8,120,6],[126,15,120,13],[127,10,120,15,"success"],[127,17,120,22],[127,19,120,24],[127,24,120,29],[128,10,120,31,"error"],[128,15,120,36],[128,17,120,38],[128,37,120,58,"readError"],[128,46,120,67],[128,47,120,68,"message"],[128,54,120,75],[129,8,120,78],[129,9,120,79],[130,6,121,4],[131,6,123,4],[131,10,123,8],[131,11,123,9,"fileContent"],[131,22,123,20],[131,26,123,24,"fileContent"],[131,37,123,35],[131,38,123,36,"length"],[131,44,123,42],[131,49,123,47],[131,50,123,48],[131,52,123,50],[132,8,124,6],[132,15,124,13],[133,10,124,15,"success"],[133,17,124,22],[133,19,124,24],[133,24,124,29],[134,10,124,31,"error"],[134,15,124,36],[134,17,124,38],[135,8,124,75],[135,9,124,76],[136,6,125,4],[137,6,127,4,"console"],[137,13,127,11],[137,14,127,12,"log"],[137,17,127,15],[137,18,127,16],[137,40,127,38],[137,42,127,40,"fileContent"],[137,53,127,51],[137,54,127,52,"length"],[137,60,127,58],[137,61,127,59],[138,6,128,4,"onProgress"],[138,16,128,14],[138,19,128,17],[139,8,128,19,"stage"],[139,13,128,24],[139,15,128,26],[139,27,128,38],[140,8,128,40,"progress"],[140,16,128,48],[140,18,128,50],[141,6,128,53],[141,7,128,54],[141,8,128,55],[143,6,130,4],[144,6,131,4,"console"],[144,13,131,11],[144,14,131,12,"log"],[144,17,131,15],[144,18,131,16],[144,42,131,40],[144,43,131,41],[145,6,132,4],[145,12,132,10,"encryptionResult"],[145,28,132,26],[145,31,132,29],[145,37,132,35],[145,41,132,35,"encryptDocument"],[145,58,132,50],[145,59,132,50,"encryptDocument"],[145,74,132,50],[145,76,132,51,"fileContent"],[145,87,132,62],[145,89,132,64,"masterKey"],[145,98,132,73],[145,99,132,74],[146,6,133,4,"console"],[146,13,133,11],[146,14,133,12,"log"],[146,17,133,15],[146,18,133,16],[146,39,133,37],[146,40,133,38],[147,6,135,4,"onProgress"],[147,16,135,14],[147,19,135,17],[148,8,135,19,"stage"],[148,13,135,24],[148,15,135,26],[148,27,135,38],[149,8,135,40,"progress"],[149,16,135,48],[149,18,135,50],[150,6,135,53],[150,7,135,54],[150,8,135,55],[152,6,137,4],[153,6,138,4],[153,12,138,10,"encryptedPayload"],[153,28,138,26],[153,31,138,29,"JSON"],[153,35,138,33],[153,36,138,34,"stringify"],[153,45,138,43],[153,46,138,44],[154,8,139,6,"data"],[154,12,139,10],[154,14,139,12,"encryptionResult"],[154,30,139,28],[154,31,139,29,"encryptedData"],[154,44,139,42],[155,8,140,6,"dataIV"],[155,14,140,12],[155,16,140,14,"encryptionResult"],[155,32,140,30],[155,33,140,31,"dataIV"],[156,6,141,4],[156,7,141,5],[156,8,141,6],[157,6,143,4,"console"],[157,13,143,11],[157,14,143,12,"log"],[157,17,143,15],[157,18,143,16],[157,45,143,43],[157,47,143,45,"encryptedPayload"],[157,63,143,61],[157,64,143,62,"length"],[157,70,143,68],[157,71,143,69],[158,6,144,4,"onProgress"],[158,16,144,14],[158,19,144,17],[159,8,144,19,"stage"],[159,13,144,24],[159,15,144,26],[159,25,144,36],[160,8,144,38,"progress"],[160,16,144,46],[160,18,144,48],[161,6,144,51],[161,7,144,52],[161,8,144,53],[163,6,146,4],[164,6,147,4,"console"],[164,13,147,11],[164,14,147,12,"log"],[164,17,147,15],[164,18,147,16],[164,44,147,42],[164,45,147,43],[165,6,148,4],[165,12,148,10,"shards"],[165,18,148,16],[165,21,148,19],[165,25,148,19,"splitIntoShards"],[165,40,148,34],[165,41,148,34,"splitIntoShards"],[165,56,148,34],[165,58,148,35,"encryptedPayload"],[165,74,148,51],[165,75,148,52],[166,6,149,4,"console"],[166,13,149,11],[166,14,149,12,"log"],[166,17,149,15],[166,18,149,16],[166,27,149,25],[166,29,149,27,"shards"],[166,35,149,33],[166,36,149,34,"length"],[166,42,149,40],[166,44,149,42],[166,52,149,50],[166,53,149,51],[167,6,151,4,"onProgress"],[167,16,151,14],[167,19,151,17],[168,8,151,19,"stage"],[168,13,151,24],[168,15,151,26],[168,25,151,36],[169,8,151,38,"progress"],[169,16,151,46],[169,18,151,48],[170,6,151,51],[170,7,151,52],[170,8,151,53],[172,6,153,4],[173,6,154,4,"console"],[173,13,154,11],[173,14,154,12,"log"],[173,17,154,15],[173,18,154,16],[173,39,154,37],[173,40,154,38],[174,6,155,4,"onProgress"],[174,16,155,14],[174,19,155,17],[175,8,155,19,"stage"],[175,13,155,24],[175,15,155,26],[175,26,155,37],[176,8,155,39,"progress"],[176,16,155,47],[176,18,155,49],[176,19,155,50],[177,8,155,52,"currentShard"],[177,20,155,64],[177,22,155,66],[177,23,155,67],[178,8,155,69,"totalShards"],[178,19,155,80],[178,21,155,82,"shards"],[178,27,155,88],[178,28,155,89,"length"],[179,6,155,96],[179,7,155,97],[179,8,155,98],[180,6,157,4],[180,12,157,10,"uploadResult"],[180,24,157,22],[180,27,157,25],[180,33,157,31],[180,37,157,31,"uploadAllShards"],[180,52,157,46],[180,53,157,46,"uploadAllShards"],[180,68,157,46],[180,70,157,47,"shards"],[180,76,157,53],[180,78,157,55,"userId"],[180,84,157,61],[180,86,157,63],[180,87,157,64,"current"],[180,94,157,71],[180,96,157,73,"total"],[180,101,157,78],[180,106,157,83],[181,8,158,6,"console"],[181,15,158,13],[181,16,158,14,"log"],[181,19,158,17],[181,20,158,18],[181,38,158,36,"current"],[181,45,158,43],[181,49,158,47,"total"],[181,54,158,52],[181,56,158,54],[181,57,158,55],[182,8,159,6,"onProgress"],[182,18,159,16],[182,21,159,19],[183,10,160,8,"stage"],[183,15,160,13],[183,17,160,15],[183,28,160,26],[184,10,161,8,"progress"],[184,18,161,16],[184,20,161,18,"Math"],[184,24,161,22],[184,25,161,23,"round"],[184,30,161,28],[184,31,161,30,"current"],[184,38,161,37],[184,41,161,40,"total"],[184,46,161,45],[184,49,161,49],[184,52,161,52],[184,53,161,53],[185,10,162,8,"currentShard"],[185,22,162,20],[185,24,162,22,"current"],[185,31,162,29],[186,10,163,8,"totalShards"],[186,21,163,19],[186,23,163,21,"total"],[187,8,164,6],[187,9,164,7],[187,10,164,8],[188,6,165,4],[188,7,165,5],[188,8,165,6],[189,6,167,4],[189,10,167,8],[189,11,167,9,"uploadResult"],[189,23,167,21],[189,24,167,22,"success"],[189,31,167,29],[189,33,167,31],[190,8,168,6,"console"],[190,15,168,13],[190,16,168,14,"error"],[190,21,168,19],[190,22,168,20],[190,38,168,36],[190,40,168,38,"uploadResult"],[190,52,168,50],[190,53,168,51,"error"],[190,58,168,56],[190,59,168,57],[191,8,169,6],[191,15,169,13],[192,10,169,15,"success"],[192,17,169,22],[192,19,169,24],[192,24,169,29],[193,10,169,31,"error"],[193,15,169,36],[193,17,169,38,"uploadResult"],[193,29,169,50],[193,30,169,51,"error"],[194,8,169,57],[194,9,169,58],[195,6,170,4],[196,6,172,4,"console"],[196,13,172,11],[196,14,172,12,"log"],[196,17,172,15],[196,18,172,16],[196,40,172,38],[196,42,172,40,"uploadResult"],[196,54,172,52],[196,55,172,53,"shardIds"],[196,63,172,61],[196,64,172,62],[198,6,174,4],[199,6,175,4],[199,12,175,10,"document"],[199,20,175,33],[199,23,175,36],[200,8,176,6,"id"],[200,10,176,8],[200,12,176,10,"generateUUID"],[200,24,176,22],[200,25,176,23],[200,26,176,24],[201,8,177,6,"name"],[201,12,177,10],[202,8,178,6,"type"],[202,12,178,10],[202,14,178,12,"mimeType"],[202,22,178,20],[202,23,178,21,"startsWith"],[202,33,178,31],[202,34,178,32],[202,42,178,40],[202,43,178,41],[202,46,178,44],[202,53,178,51],[202,56,178,54],[202,61,178,59],[203,8,179,6,"mimeType"],[203,16,179,14],[204,8,180,6,"size"],[204,12,180,10],[205,8,181,6,"createdAt"],[205,17,181,15],[205,19,181,17,"Date"],[205,23,181,21],[205,24,181,22,"now"],[205,27,181,25],[205,28,181,26],[205,29,181,27],[206,8,182,6,"shardIds"],[206,16,182,14],[206,18,182,16,"uploadResult"],[206,30,182,28],[206,31,182,29,"shardIds"],[206,39,182,38],[207,8,183,6,"encryptedFEK"],[207,20,183,18],[207,22,183,20,"encryptionResult"],[207,38,183,36],[207,39,183,37,"encryptedFEK"],[207,51,183,49],[208,8,184,6,"iv"],[208,10,184,8],[208,12,184,10,"encryptionResult"],[208,28,184,26],[208,29,184,27,"fekIV"],[209,6,185,4],[209,7,185,5],[211,6,187,4],[212,6,188,4],[212,12,188,10,"shardIndices"],[212,24,188,22],[212,27,188,25,"shards"],[212,33,188,31],[212,34,188,32,"map"],[212,37,188,35],[212,38,188,36],[212,39,188,37,"s"],[212,40,188,38],[212,42,188,40,"i"],[212,43,188,41],[212,49,188,47],[213,8,188,49,"id"],[213,10,188,51],[213,12,188,53,"s"],[213,13,188,54],[213,14,188,55,"id"],[213,16,188,57],[214,8,188,59,"index"],[214,13,188,64],[214,15,188,66,"i"],[215,6,188,68],[215,7,188,69],[215,8,188,70],[215,9,188,71],[216,6,189,5,"document"],[216,14,189,13],[216,15,189,22,"shardIndices"],[216,27,189,34],[216,30,189,37,"shardIndices"],[216,42,189,49],[217,6,191,4,"console"],[217,13,191,11],[217,14,191,12,"log"],[217,17,191,15],[217,18,191,16],[217,43,191,41],[217,44,191,42],[218,6,192,4],[218,13,192,11],[219,8,192,13,"success"],[219,15,192,20],[219,17,192,22],[219,21,192,26],[220,8,192,28,"document"],[221,6,192,37],[221,7,192,38],[222,4,193,2],[222,5,193,3],[222,6,193,4],[222,13,193,11,"error"],[222,18,193,21],[222,20,193,23],[223,6,194,4,"console"],[223,13,194,11],[223,14,194,12,"error"],[223,19,194,17],[223,20,194,18],[223,39,194,37],[223,41,194,39,"error"],[223,46,194,44],[223,47,194,45],[224,6,195,4],[224,13,195,11],[225,8,195,13,"success"],[225,15,195,20],[225,17,195,22],[225,22,195,27],[226,8,195,29,"error"],[226,13,195,34],[226,15,195,36,"error"],[226,20,195,41],[226,21,195,42,"message"],[226,28,195,49],[226,32,195,53],[227,6,195,69],[227,7,195,70],[228,4,196,2],[229,2,197,0],[231,2,199,0],[232,0,200,0],[233,0,201,0],[234,0,202,0],[235,2,203,7],[235,17,203,22,"downloadDocument"],[235,33,203,38,"downloadDocument"],[235,34,204,2,"document"],[235,42,204,25],[235,44,205,2,"masterKey"],[235,53,205,19],[235,55,206,2,"userId"],[235,61,206,16],[235,63,207,2,"onProgress"],[235,73,207,49],[235,75,208,83],[236,4,209,2],[236,8,209,6],[237,6,210,4],[238,6,211,4,"onProgress"],[238,16,211,14],[238,19,211,17],[239,8,211,19,"stage"],[239,13,211,24],[239,15,211,26],[239,26,211,37],[240,8,211,39,"progress"],[240,16,211,47],[240,18,211,49],[240,19,211,50],[241,8,211,52,"currentShard"],[241,20,211,64],[241,22,211,66],[241,23,211,67],[242,8,211,69,"totalShards"],[242,19,211,80],[242,21,211,82,"document"],[242,29,211,90],[242,30,211,91,"shardIds"],[242,38,211,99],[242,39,211,100,"length"],[243,6,211,107],[243,7,211,108],[243,8,211,109],[244,6,213,4],[244,12,213,10,"shardIndices"],[244,24,213,22],[244,27,213,26,"document"],[244,35,213,34],[244,36,213,43,"shardIndices"],[244,48,213,55],[244,52,213,59,"document"],[244,60,213,67],[244,61,213,68,"shardIds"],[244,69,213,76],[244,70,213,77,"map"],[244,73,213,80],[244,74,213,81],[244,75,213,82,"id"],[244,77,213,84],[244,79,213,86,"i"],[244,80,213,87],[244,86,213,93],[245,8,213,95,"id"],[245,10,213,97],[246,8,213,99,"index"],[246,13,213,104],[246,15,213,106,"i"],[247,6,213,108],[247,7,213,109],[247,8,213,110],[247,9,213,111],[248,6,214,4],[248,12,214,10,"indices"],[248,19,214,17],[248,22,214,20,"shardIndices"],[248,34,214,32],[248,35,214,33,"map"],[248,38,214,36],[248,39,214,38,"s"],[248,40,214,44],[248,44,214,49,"s"],[248,45,214,50],[248,46,214,51,"index"],[248,51,214,56],[248,52,214,57],[249,6,216,4],[249,12,216,10,"downloadResult"],[249,26,216,24],[249,29,216,27],[249,35,216,33],[249,39,216,33,"downloadAllShards"],[249,54,216,50],[249,55,216,50,"downloadAllShards"],[249,72,216,50],[249,74,217,6,"document"],[249,82,217,14],[249,83,217,15,"shardIds"],[249,91,217,23],[249,93,218,6,"indices"],[249,100,218,13],[249,102,219,6,"userId"],[249,108,219,12],[249,110,220,6],[249,111,220,7,"current"],[249,118,220,14],[249,120,220,16,"total"],[249,125,220,21],[249,130,220,26],[250,8,221,8,"onProgress"],[250,18,221,18],[250,21,221,21],[251,10,222,10,"stage"],[251,15,222,15],[251,17,222,17],[251,28,222,28],[252,10,223,10,"progress"],[252,18,223,18],[252,20,223,20,"Math"],[252,24,223,24],[252,25,223,25,"round"],[252,30,223,30],[252,31,223,32,"current"],[252,38,223,39],[252,41,223,42,"total"],[252,46,223,47],[252,49,223,51],[252,52,223,54],[252,53,223,55],[253,10,224,10,"currentShard"],[253,22,224,22],[253,24,224,24,"current"],[253,31,224,31],[254,10,225,10,"totalShards"],[254,21,225,21],[254,23,225,23,"total"],[255,8,226,8],[255,9,226,9],[255,10,226,10],[256,6,227,6],[256,7,228,4],[256,8,228,5],[257,6,230,4],[257,10,230,8],[257,11,230,9,"downloadResult"],[257,25,230,23],[257,26,230,24,"success"],[257,33,230,31],[257,35,230,33],[258,8,231,6],[258,15,231,13],[259,10,231,15,"success"],[259,17,231,22],[259,19,231,24],[259,24,231,29],[260,10,231,31,"error"],[260,15,231,36],[260,17,231,38,"downloadResult"],[260,31,231,52],[260,32,231,53,"error"],[261,8,231,59],[261,9,231,60],[262,6,232,4],[264,6,234,4],[265,6,235,4,"onProgress"],[265,16,235,14],[265,19,235,17],[266,8,235,19,"stage"],[266,13,235,24],[266,15,235,26],[266,25,235,36],[267,8,235,38,"progress"],[267,16,235,46],[267,18,235,48],[268,6,235,51],[268,7,235,52],[268,8,235,53],[269,6,237,4],[269,12,237,10,"encryptedPayload"],[269,28,237,26],[269,31,237,29],[269,35,237,29,"reassembleShards"],[269,50,237,45],[269,51,237,45,"reassembleShards"],[269,67,237,45],[269,69,237,46,"downloadResult"],[269,83,237,60],[269,84,237,61,"shards"],[269,90,237,68],[269,91,237,69],[270,6,238,4],[270,12,238,10],[271,8,238,12,"data"],[271,12,238,16],[271,14,238,18,"encryptedData"],[271,27,238,31],[272,8,238,33,"dataIV"],[273,6,238,40],[273,7,238,41],[273,10,238,44,"JSON"],[273,14,238,48],[273,15,238,49,"parse"],[273,20,238,54],[273,21,238,55,"encryptedPayload"],[273,37,238,71],[273,38,238,72],[275,6,240,4],[276,6,241,4,"onProgress"],[276,16,241,14],[276,19,241,17],[277,8,241,19,"stage"],[277,13,241,24],[277,15,241,26],[277,27,241,38],[278,8,241,40,"progress"],[278,16,241,48],[278,18,241,50],[279,6,241,53],[279,7,241,54],[279,8,241,55],[280,6,243,4],[280,12,243,10,"decryptedData"],[280,25,243,23],[280,28,243,26],[280,32,243,26,"decryptDocument"],[280,49,243,41],[280,50,243,41,"decryptDocument"],[280,65,243,41],[280,67,244,6,"encryptedData"],[280,80,244,19],[280,82,245,6,"document"],[280,90,245,14],[280,91,245,15,"encryptedFEK"],[280,103,245,27],[280,105,246,6,"document"],[280,113,246,14],[280,114,246,15,"iv"],[280,116,246,17],[280,118,247,6,"dataIV"],[280,124,247,12],[280,126,248,6,"masterKey"],[280,135,249,4],[280,136,249,5],[281,6,251,4],[281,10,251,8],[281,11,251,9,"decryptedData"],[281,24,251,22],[281,26,251,24],[282,8,252,6],[282,15,252,13],[283,10,252,15,"success"],[283,17,252,22],[283,19,252,24],[283,24,252,29],[284,10,252,31,"error"],[284,15,252,36],[284,17,252,38],[285,8,252,90],[285,9,252,91],[286,6,253,4],[287,6,255,4,"onProgress"],[287,16,255,14],[287,19,255,17],[288,8,255,19,"stage"],[288,13,255,24],[288,15,255,26],[288,27,255,38],[289,8,255,40,"progress"],[289,16,255,48],[289,18,255,50],[290,6,255,54],[290,7,255,55],[290,8,255,56],[291,6,257,4],[291,13,257,11],[292,8,258,6,"success"],[292,15,258,13],[292,17,258,15],[292,21,258,19],[293,8,259,6,"data"],[293,12,259,10],[293,14,259,12,"decryptedData"],[293,27,259,25],[294,8,259,27],[295,8,260,6,"mimeType"],[295,16,260,14],[295,18,260,16,"document"],[295,26,260,24],[295,27,260,25,"mimeType"],[296,6,261,4],[296,7,261,5],[297,4,262,2],[297,5,262,3],[297,6,262,4],[297,13,262,11,"error"],[297,18,262,21],[297,20,262,23],[298,6,263,4],[298,13,263,11],[299,8,263,13,"success"],[299,15,263,20],[299,17,263,22],[299,22,263,27],[300,8,263,29,"error"],[300,13,263,34],[300,15,263,36,"error"],[300,20,263,41],[300,21,263,42,"message"],[300,28,263,49],[300,32,263,53],[301,6,263,71],[301,7,263,72],[302,4,264,2],[303,2,265,0],[305,2,267,0],[306,0,268,0],[307,0,269,0],[308,2,270,7],[308,17,270,22,"deleteDocument"],[308,31,270,36,"deleteDocument"],[308,32,271,2,"document"],[308,40,271,25],[308,42,272,2,"userId"],[308,48,272,16],[308,50,273,49],[309,4,274,2],[309,11,274,9],[309,15,274,9,"deleteDocumentShards"],[309,30,274,29],[309,31,274,29,"deleteDocumentShards"],[309,51,274,29],[309,53,274,30,"document"],[309,61,274,38],[309,62,274,39,"shardIds"],[309,70,274,47],[309,72,274,49,"userId"],[309,78,274,55],[309,79,274,56],[310,2,275,0],[311,0,275,1],[311,3]],"functionMap":{"names":["<global>","generateUUID","xxxxxxxxXxxx4xxxYxxxXxxxxxxxxxxx.replace$argument_1","pickDocument","readFileAsBase64","uploadDocument","uploadAllShards$argument_2","shards.map$argument_0","downloadDocument","document.shardIds.map$argument_0","shardIndices.map$argument_0","downloadAllShards$argument_3","deleteDocument"],"mappings":"AAA;ACY;iECC;GDI;CDC;OGW;CHgC;AIK;CJuB;OKM;+DC6D;KDQ;oCEuB,kCF;CLS;OQM;iFCU,6BD;qCEC,mBF;MGM;OHO;CRsC;OYK;CZK"},"hasCjsExports":false},"type":"js/module"}]}