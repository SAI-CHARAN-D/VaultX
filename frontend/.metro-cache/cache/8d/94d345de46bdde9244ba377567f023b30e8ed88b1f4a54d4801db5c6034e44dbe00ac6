{"dependencies":[{"name":"./supabaseClient","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":106},"end":{"line":4,"column":44,"index":150}}],"key":"Fd7w8mMawcXEor1Po+CqWnKxQDc=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.signUp = signUp;\n  exports.signIn = signIn;\n  exports.signOut = signOut;\n  exports.getSession = getSession;\n  exports.onAuthStateChange = onAuthStateChange;\n  var _supabaseClient = require(_dependencyMap[0], \"./supabaseClient\");\n  // Authentication Service - Zero Knowledge Vault\n  // Supabase auth is for IDENTITY ONLY, not vault access\n\n  /**\n   * Sign up with email and password\n   * This creates identity only - vault setup happens separately\n   */\n  async function signUp(email, password) {\n    try {\n      const {\n        data,\n        error\n      } = await _supabaseClient.supabase.auth.signUp({\n        email,\n        password,\n        options: {\n          // Disable email confirmation for easier development\n          emailRedirectTo: undefined\n        }\n      });\n      if (error) {\n        // Handle rate limit error with user-friendly message\n        if (error.message.includes('rate limit') || error.message.includes('Rate limit')) {\n          return {\n            success: false,\n            error: 'Too many signup attempts. Please wait a few minutes and try again.'\n          };\n        }\n        return {\n          success: false,\n          error: error.message\n        };\n      }\n      if (data.user) {\n        // Check if email confirmation is required\n        if (data.user.identities && data.user.identities.length === 0) {\n          return {\n            success: false,\n            error: 'This email is already registered. Please sign in instead.'\n          };\n        }\n        return {\n          success: true,\n          user: {\n            id: data.user.id,\n            email: data.user.email || email\n          }\n        };\n      }\n      return {\n        success: false,\n        error: 'Failed to create account'\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: error.message || 'Unknown error'\n      };\n    }\n  }\n\n  /**\n   * Sign in with email and password\n   */\n  async function signIn(email, password) {\n    try {\n      const {\n        data,\n        error\n      } = await _supabaseClient.supabase.auth.signInWithPassword({\n        email,\n        password\n      });\n      if (error) {\n        return {\n          success: false,\n          error: error.message\n        };\n      }\n      if (data.user) {\n        return {\n          success: true,\n          user: {\n            id: data.user.id,\n            email: data.user.email || email\n          }\n        };\n      }\n      return {\n        success: false,\n        error: 'Failed to sign in'\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: error.message || 'Unknown error'\n      };\n    }\n  }\n\n  /**\n   * Sign out\n   */\n  async function signOut() {\n    await _supabaseClient.supabase.auth.signOut();\n  }\n\n  /**\n   * Get current session\n   */\n  async function getSession() {\n    try {\n      const {\n        data: {\n          session\n        }\n      } = await _supabaseClient.supabase.auth.getSession();\n      if (session?.user) {\n        return {\n          id: session.user.id,\n          email: session.user.email || ''\n        };\n      }\n      return null;\n    } catch (error) {\n      return null;\n    }\n  }\n\n  /**\n   * Listen to auth state changes\n   */\n  function onAuthStateChange(callback) {\n    return _supabaseClient.supabase.auth.onAuthStateChange((event, session) => {\n      if (session?.user) {\n        callback({\n          id: session.user.id,\n          email: session.user.email || ''\n        });\n      } else {\n        callback(null);\n      }\n    });\n  }\n});","lineCount":157,"map":[[7,2,17,0,"exports"],[7,9,17,0],[7,10,17,0,"signUp"],[7,16,17,0],[7,19,17,0,"signUp"],[7,25,17,0],[8,2,66,0,"exports"],[8,9,66,0],[8,10,66,0,"signIn"],[8,16,66,0],[8,19,66,0,"signIn"],[8,25,66,0],[9,2,96,0,"exports"],[9,9,96,0],[9,10,96,0,"signOut"],[9,17,96,0],[9,20,96,0,"signOut"],[9,27,96,0],[10,2,103,0,"exports"],[10,9,103,0],[10,10,103,0,"getSession"],[10,20,103,0],[10,23,103,0,"getSession"],[10,33,103,0],[11,2,123,0,"exports"],[11,9,123,0],[11,10,123,0,"onAuthStateChange"],[11,27,123,0],[11,30,123,0,"onAuthStateChange"],[11,47,123,0],[12,2,4,0],[12,6,4,0,"_supabaseClient"],[12,21,4,0],[12,24,4,0,"require"],[12,31,4,0],[12,32,4,0,"_dependencyMap"],[12,46,4,0],[13,2,1,0],[14,2,2,0],[16,2,13,0],[17,0,14,0],[18,0,15,0],[19,0,16,0],[20,2,17,7],[20,17,17,22,"signUp"],[20,23,17,28,"signUp"],[20,24,17,29,"email"],[20,29,17,42],[20,31,17,44,"password"],[20,39,17,60],[20,41,17,83],[21,4,18,2],[21,8,18,6],[22,6,19,4],[22,12,19,10],[23,8,19,12,"data"],[23,12,19,16],[24,8,19,18,"error"],[25,6,19,24],[25,7,19,25],[25,10,19,28],[25,16,19,34,"supabase"],[25,31,19,42],[25,32,19,42,"supabase"],[25,40,19,42],[25,41,19,43,"auth"],[25,45,19,47],[25,46,19,48,"signUp"],[25,52,19,54],[25,53,19,55],[26,8,20,6,"email"],[26,13,20,11],[27,8,21,6,"password"],[27,16,21,14],[28,8,22,6,"options"],[28,15,22,13],[28,17,22,15],[29,10,23,8],[30,10,24,8,"emailRedirectTo"],[30,25,24,23],[30,27,24,25,"undefined"],[31,8,25,6],[32,6,26,4],[32,7,26,5],[32,8,26,6],[33,6,28,4],[33,10,28,8,"error"],[33,15,28,13],[33,17,28,15],[34,8,29,6],[35,8,30,6],[35,12,30,10,"error"],[35,17,30,15],[35,18,30,16,"message"],[35,25,30,23],[35,26,30,24,"includes"],[35,34,30,32],[35,35,30,33],[35,47,30,45],[35,48,30,46],[35,52,30,50,"error"],[35,57,30,55],[35,58,30,56,"message"],[35,65,30,63],[35,66,30,64,"includes"],[35,74,30,72],[35,75,30,73],[35,87,30,85],[35,88,30,86],[35,90,30,88],[36,10,31,8],[36,17,31,15],[37,12,32,10,"success"],[37,19,32,17],[37,21,32,19],[37,26,32,24],[38,12,33,10,"error"],[38,17,33,15],[38,19,33,17],[39,10,34,8],[39,11,34,9],[40,8,35,6],[41,8,36,6],[41,15,36,13],[42,10,36,15,"success"],[42,17,36,22],[42,19,36,24],[42,24,36,29],[43,10,36,31,"error"],[43,15,36,36],[43,17,36,38,"error"],[43,22,36,43],[43,23,36,44,"message"],[44,8,36,52],[44,9,36,53],[45,6,37,4],[46,6,39,4],[46,10,39,8,"data"],[46,14,39,12],[46,15,39,13,"user"],[46,19,39,17],[46,21,39,19],[47,8,40,6],[48,8,41,6],[48,12,41,10,"data"],[48,16,41,14],[48,17,41,15,"user"],[48,21,41,19],[48,22,41,20,"identities"],[48,32,41,30],[48,36,41,34,"data"],[48,40,41,38],[48,41,41,39,"user"],[48,45,41,43],[48,46,41,44,"identities"],[48,56,41,54],[48,57,41,55,"length"],[48,63,41,61],[48,68,41,66],[48,69,41,67],[48,71,41,69],[49,10,42,8],[49,17,42,15],[50,12,43,10,"success"],[50,19,43,17],[50,21,43,19],[50,26,43,24],[51,12,44,10,"error"],[51,17,44,15],[51,19,44,17],[52,10,45,8],[52,11,45,9],[53,8,46,6],[54,8,48,6],[54,15,48,13],[55,10,49,8,"success"],[55,17,49,15],[55,19,49,17],[55,23,49,21],[56,10,50,8,"user"],[56,14,50,12],[56,16,50,14],[57,12,51,10,"id"],[57,14,51,12],[57,16,51,14,"data"],[57,20,51,18],[57,21,51,19,"user"],[57,25,51,23],[57,26,51,24,"id"],[57,28,51,26],[58,12,52,10,"email"],[58,17,52,15],[58,19,52,17,"data"],[58,23,52,21],[58,24,52,22,"user"],[58,28,52,26],[58,29,52,27,"email"],[58,34,52,32],[58,38,52,36,"email"],[59,10,53,8],[60,8,54,6],[60,9,54,7],[61,6,55,4],[62,6,57,4],[62,13,57,11],[63,8,57,13,"success"],[63,15,57,20],[63,17,57,22],[63,22,57,27],[64,8,57,29,"error"],[64,13,57,34],[64,15,57,36],[65,6,57,63],[65,7,57,64],[66,4,58,2],[66,5,58,3],[66,6,58,4],[66,13,58,11,"error"],[66,18,58,21],[66,20,58,23],[67,6,59,4],[67,13,59,11],[68,8,59,13,"success"],[68,15,59,20],[68,17,59,22],[68,22,59,27],[69,8,59,29,"error"],[69,13,59,34],[69,15,59,36,"error"],[69,20,59,41],[69,21,59,42,"message"],[69,28,59,49],[69,32,59,53],[70,6,59,69],[70,7,59,70],[71,4,60,2],[72,2,61,0],[74,2,63,0],[75,0,64,0],[76,0,65,0],[77,2,66,7],[77,17,66,22,"signIn"],[77,23,66,28,"signIn"],[77,24,66,29,"email"],[77,29,66,42],[77,31,66,44,"password"],[77,39,66,60],[77,41,66,83],[78,4,67,2],[78,8,67,6],[79,6,68,4],[79,12,68,10],[80,8,68,12,"data"],[80,12,68,16],[81,8,68,18,"error"],[82,6,68,24],[82,7,68,25],[82,10,68,28],[82,16,68,34,"supabase"],[82,31,68,42],[82,32,68,42,"supabase"],[82,40,68,42],[82,41,68,43,"auth"],[82,45,68,47],[82,46,68,48,"signInWithPassword"],[82,64,68,66],[82,65,68,67],[83,8,69,6,"email"],[83,13,69,11],[84,8,70,6,"password"],[85,6,71,4],[85,7,71,5],[85,8,71,6],[86,6,73,4],[86,10,73,8,"error"],[86,15,73,13],[86,17,73,15],[87,8,74,6],[87,15,74,13],[88,10,74,15,"success"],[88,17,74,22],[88,19,74,24],[88,24,74,29],[89,10,74,31,"error"],[89,15,74,36],[89,17,74,38,"error"],[89,22,74,43],[89,23,74,44,"message"],[90,8,74,52],[90,9,74,53],[91,6,75,4],[92,6,77,4],[92,10,77,8,"data"],[92,14,77,12],[92,15,77,13,"user"],[92,19,77,17],[92,21,77,19],[93,8,78,6],[93,15,78,13],[94,10,79,8,"success"],[94,17,79,15],[94,19,79,17],[94,23,79,21],[95,10,80,8,"user"],[95,14,80,12],[95,16,80,14],[96,12,81,10,"id"],[96,14,81,12],[96,16,81,14,"data"],[96,20,81,18],[96,21,81,19,"user"],[96,25,81,23],[96,26,81,24,"id"],[96,28,81,26],[97,12,82,10,"email"],[97,17,82,15],[97,19,82,17,"data"],[97,23,82,21],[97,24,82,22,"user"],[97,28,82,26],[97,29,82,27,"email"],[97,34,82,32],[97,38,82,36,"email"],[98,10,83,8],[99,8,84,6],[99,9,84,7],[100,6,85,4],[101,6,87,4],[101,13,87,11],[102,8,87,13,"success"],[102,15,87,20],[102,17,87,22],[102,22,87,27],[103,8,87,29,"error"],[103,13,87,34],[103,15,87,36],[104,6,87,56],[104,7,87,57],[105,4,88,2],[105,5,88,3],[105,6,88,4],[105,13,88,11,"error"],[105,18,88,21],[105,20,88,23],[106,6,89,4],[106,13,89,11],[107,8,89,13,"success"],[107,15,89,20],[107,17,89,22],[107,22,89,27],[108,8,89,29,"error"],[108,13,89,34],[108,15,89,36,"error"],[108,20,89,41],[108,21,89,42,"message"],[108,28,89,49],[108,32,89,53],[109,6,89,69],[109,7,89,70],[110,4,90,2],[111,2,91,0],[113,2,93,0],[114,0,94,0],[115,0,95,0],[116,2,96,7],[116,17,96,22,"signOut"],[116,24,96,29,"signOut"],[116,25,96,29],[116,27,96,47],[117,4,97,2],[117,10,97,8,"supabase"],[117,25,97,16],[117,26,97,16,"supabase"],[117,34,97,16],[117,35,97,17,"auth"],[117,39,97,21],[117,40,97,22,"signOut"],[117,47,97,29],[117,48,97,30],[117,49,97,31],[118,2,98,0],[120,2,100,0],[121,0,101,0],[122,0,102,0],[123,2,103,7],[123,17,103,22,"getSession"],[123,27,103,32,"getSession"],[123,28,103,32],[123,30,103,57],[124,4,104,2],[124,8,104,6],[125,6,105,4],[125,12,105,10],[126,8,105,12,"data"],[126,12,105,16],[126,14,105,18],[127,10,105,20,"session"],[128,8,105,28],[129,6,105,30],[129,7,105,31],[129,10,105,34],[129,16,105,40,"supabase"],[129,31,105,48],[129,32,105,48,"supabase"],[129,40,105,48],[129,41,105,49,"auth"],[129,45,105,53],[129,46,105,54,"getSession"],[129,56,105,64],[129,57,105,65],[129,58,105,66],[130,6,107,4],[130,10,107,8,"session"],[130,17,107,15],[130,19,107,17,"user"],[130,23,107,21],[130,25,107,23],[131,8,108,6],[131,15,108,13],[132,10,109,8,"id"],[132,12,109,10],[132,14,109,12,"session"],[132,21,109,19],[132,22,109,20,"user"],[132,26,109,24],[132,27,109,25,"id"],[132,29,109,27],[133,10,110,8,"email"],[133,15,110,13],[133,17,110,15,"session"],[133,24,110,22],[133,25,110,23,"user"],[133,29,110,27],[133,30,110,28,"email"],[133,35,110,33],[133,39,110,37],[134,8,111,6],[134,9,111,7],[135,6,112,4],[136,6,114,4],[136,13,114,11],[136,17,114,15],[137,4,115,2],[137,5,115,3],[137,6,115,4],[137,13,115,11,"error"],[137,18,115,16],[137,20,115,18],[138,6,116,4],[138,13,116,11],[138,17,116,15],[139,4,117,2],[140,2,118,0],[142,2,120,0],[143,0,121,0],[144,0,122,0],[145,2,123,7],[145,11,123,16,"onAuthStateChange"],[145,28,123,33,"onAuthStateChange"],[145,29,123,34,"callback"],[145,37,123,71],[145,39,123,73],[146,4,124,2],[146,11,124,9,"supabase"],[146,26,124,17],[146,27,124,17,"supabase"],[146,35,124,17],[146,36,124,18,"auth"],[146,40,124,22],[146,41,124,23,"onAuthStateChange"],[146,58,124,40],[146,59,124,41],[146,60,124,42,"event"],[146,65,124,47],[146,67,124,49,"session"],[146,74,124,56],[146,79,124,61],[147,6,125,4],[147,10,125,8,"session"],[147,17,125,15],[147,19,125,17,"user"],[147,23,125,21],[147,25,125,23],[148,8,126,6,"callback"],[148,16,126,14],[148,17,126,15],[149,10,127,8,"id"],[149,12,127,10],[149,14,127,12,"session"],[149,21,127,19],[149,22,127,20,"user"],[149,26,127,24],[149,27,127,25,"id"],[149,29,127,27],[150,10,128,8,"email"],[150,15,128,13],[150,17,128,15,"session"],[150,24,128,22],[150,25,128,23,"user"],[150,29,128,27],[150,30,128,28,"email"],[150,35,128,33],[150,39,128,37],[151,8,129,6],[151,9,129,7],[151,10,129,8],[152,6,130,4],[152,7,130,5],[152,13,130,11],[153,8,131,6,"callback"],[153,16,131,14],[153,17,131,15],[153,21,131,19],[153,22,131,20],[154,6,132,4],[155,4,133,2],[155,5,133,3],[155,6,133,4],[156,2,134,0],[157,0,134,1],[157,3]],"functionMap":{"names":["<global>","signUp","signIn","signOut","getSession","onAuthStateChange","supabase.auth.onAuthStateChange$argument_0"],"mappings":"AAA;OCgB;CD4C;OEK;CFyB;OGK;CHE;OIK;CJe;OKK;yCCC;GDS;CLC"},"hasCjsExports":false},"type":"js/module"}]}