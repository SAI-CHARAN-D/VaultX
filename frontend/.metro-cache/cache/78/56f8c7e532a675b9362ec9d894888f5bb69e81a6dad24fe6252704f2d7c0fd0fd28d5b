{"dependencies":[{"name":"./supabaseClient","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":106},"end":{"line":4,"column":44,"index":150}}],"key":"Fd7w8mMawcXEor1Po+CqWnKxQDc=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.signUp = signUp;\n  exports.signIn = signIn;\n  exports.signOut = signOut;\n  exports.getSession = getSession;\n  exports.onAuthStateChange = onAuthStateChange;\n  var _supabaseClient = require(_dependencyMap[0], \"./supabaseClient\");\n  // Authentication Service - Zero Knowledge Vault\n  // Supabase auth is for IDENTITY ONLY, not vault access\n\n  /**\n   * Sign up with email and password\n   * This creates identity only - vault setup happens separately\n   */\n  async function signUp(email, password) {\n    try {\n      const {\n        data,\n        error\n      } = await _supabaseClient.supabase.auth.signUp({\n        email,\n        password,\n        options: {\n          // Disable email confirmation for easier development\n          emailRedirectTo: undefined\n        }\n      });\n      if (error) {\n        // Handle rate limit error with user-friendly message\n        if (error.message.includes('rate limit') || error.message.includes('Rate limit')) {\n          return {\n            success: false,\n            error: 'Too many signup attempts. Please wait a few minutes and try again.'\n          };\n        }\n        return {\n          success: false,\n          error: error.message\n        };\n      }\n      if (data.user) {\n        // Check if email confirmation is required\n        if (data.user.identities && data.user.identities.length === 0) {\n          return {\n            success: false,\n            error: 'This email is already registered. Please sign in instead.'\n          };\n        }\n        return {\n          success: true,\n          user: {\n            id: data.user.id,\n            email: data.user.email || email\n          }\n        };\n      }\n      return {\n        success: false,\n        error: 'Failed to create account'\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: error.message || 'Unknown error'\n      };\n    }\n  }\n\n  /**\n   * Sign in with email and password\n   */\n  async function signIn(email, password) {\n    try {\n      const {\n        data,\n        error\n      } = await _supabaseClient.supabase.auth.signInWithPassword({\n        email,\n        password\n      });\n      if (error) {\n        // Handle email not confirmed error\n        if (error.message.includes('Email not confirmed') || error.message.includes('email not confirmed')) {\n          return {\n            success: false,\n            error: 'Email not confirmed. Please check your email or disable email confirmation in Supabase dashboard.'\n          };\n        }\n        return {\n          success: false,\n          error: error.message\n        };\n      }\n      if (data.user) {\n        return {\n          success: true,\n          user: {\n            id: data.user.id,\n            email: data.user.email || email\n          }\n        };\n      }\n      return {\n        success: false,\n        error: 'Failed to sign in'\n      };\n    } catch (error) {\n      return {\n        success: false,\n        error: error.message || 'Unknown error'\n      };\n    }\n  }\n\n  /**\n   * Sign out\n   */\n  async function signOut() {\n    await _supabaseClient.supabase.auth.signOut();\n  }\n\n  /**\n   * Get current session\n   */\n  async function getSession() {\n    try {\n      const {\n        data: {\n          session\n        }\n      } = await _supabaseClient.supabase.auth.getSession();\n      if (session?.user) {\n        return {\n          id: session.user.id,\n          email: session.user.email || ''\n        };\n      }\n      return null;\n    } catch (error) {\n      return null;\n    }\n  }\n\n  /**\n   * Listen to auth state changes\n   */\n  function onAuthStateChange(callback) {\n    return _supabaseClient.supabase.auth.onAuthStateChange((event, session) => {\n      if (session?.user) {\n        callback({\n          id: session.user.id,\n          email: session.user.email || ''\n        });\n      } else {\n        callback(null);\n      }\n    });\n  }\n});","lineCount":164,"map":[[7,2,17,0,"exports"],[7,9,17,0],[7,10,17,0,"signUp"],[7,16,17,0],[7,19,17,0,"signUp"],[7,25,17,0],[8,2,66,0,"exports"],[8,9,66,0],[8,10,66,0,"signIn"],[8,16,66,0],[8,19,66,0,"signIn"],[8,25,66,0],[9,2,103,0,"exports"],[9,9,103,0],[9,10,103,0,"signOut"],[9,17,103,0],[9,20,103,0,"signOut"],[9,27,103,0],[10,2,110,0,"exports"],[10,9,110,0],[10,10,110,0,"getSession"],[10,20,110,0],[10,23,110,0,"getSession"],[10,33,110,0],[11,2,130,0,"exports"],[11,9,130,0],[11,10,130,0,"onAuthStateChange"],[11,27,130,0],[11,30,130,0,"onAuthStateChange"],[11,47,130,0],[12,2,4,0],[12,6,4,0,"_supabaseClient"],[12,21,4,0],[12,24,4,0,"require"],[12,31,4,0],[12,32,4,0,"_dependencyMap"],[12,46,4,0],[13,2,1,0],[14,2,2,0],[16,2,13,0],[17,0,14,0],[18,0,15,0],[19,0,16,0],[20,2,17,7],[20,17,17,22,"signUp"],[20,23,17,28,"signUp"],[20,24,17,29,"email"],[20,29,17,42],[20,31,17,44,"password"],[20,39,17,60],[20,41,17,83],[21,4,18,2],[21,8,18,6],[22,6,19,4],[22,12,19,10],[23,8,19,12,"data"],[23,12,19,16],[24,8,19,18,"error"],[25,6,19,24],[25,7,19,25],[25,10,19,28],[25,16,19,34,"supabase"],[25,31,19,42],[25,32,19,42,"supabase"],[25,40,19,42],[25,41,19,43,"auth"],[25,45,19,47],[25,46,19,48,"signUp"],[25,52,19,54],[25,53,19,55],[26,8,20,6,"email"],[26,13,20,11],[27,8,21,6,"password"],[27,16,21,14],[28,8,22,6,"options"],[28,15,22,13],[28,17,22,15],[29,10,23,8],[30,10,24,8,"emailRedirectTo"],[30,25,24,23],[30,27,24,25,"undefined"],[31,8,25,6],[32,6,26,4],[32,7,26,5],[32,8,26,6],[33,6,28,4],[33,10,28,8,"error"],[33,15,28,13],[33,17,28,15],[34,8,29,6],[35,8,30,6],[35,12,30,10,"error"],[35,17,30,15],[35,18,30,16,"message"],[35,25,30,23],[35,26,30,24,"includes"],[35,34,30,32],[35,35,30,33],[35,47,30,45],[35,48,30,46],[35,52,30,50,"error"],[35,57,30,55],[35,58,30,56,"message"],[35,65,30,63],[35,66,30,64,"includes"],[35,74,30,72],[35,75,30,73],[35,87,30,85],[35,88,30,86],[35,90,30,88],[36,10,31,8],[36,17,31,15],[37,12,32,10,"success"],[37,19,32,17],[37,21,32,19],[37,26,32,24],[38,12,33,10,"error"],[38,17,33,15],[38,19,33,17],[39,10,34,8],[39,11,34,9],[40,8,35,6],[41,8,36,6],[41,15,36,13],[42,10,36,15,"success"],[42,17,36,22],[42,19,36,24],[42,24,36,29],[43,10,36,31,"error"],[43,15,36,36],[43,17,36,38,"error"],[43,22,36,43],[43,23,36,44,"message"],[44,8,36,52],[44,9,36,53],[45,6,37,4],[46,6,39,4],[46,10,39,8,"data"],[46,14,39,12],[46,15,39,13,"user"],[46,19,39,17],[46,21,39,19],[47,8,40,6],[48,8,41,6],[48,12,41,10,"data"],[48,16,41,14],[48,17,41,15,"user"],[48,21,41,19],[48,22,41,20,"identities"],[48,32,41,30],[48,36,41,34,"data"],[48,40,41,38],[48,41,41,39,"user"],[48,45,41,43],[48,46,41,44,"identities"],[48,56,41,54],[48,57,41,55,"length"],[48,63,41,61],[48,68,41,66],[48,69,41,67],[48,71,41,69],[49,10,42,8],[49,17,42,15],[50,12,43,10,"success"],[50,19,43,17],[50,21,43,19],[50,26,43,24],[51,12,44,10,"error"],[51,17,44,15],[51,19,44,17],[52,10,45,8],[52,11,45,9],[53,8,46,6],[54,8,48,6],[54,15,48,13],[55,10,49,8,"success"],[55,17,49,15],[55,19,49,17],[55,23,49,21],[56,10,50,8,"user"],[56,14,50,12],[56,16,50,14],[57,12,51,10,"id"],[57,14,51,12],[57,16,51,14,"data"],[57,20,51,18],[57,21,51,19,"user"],[57,25,51,23],[57,26,51,24,"id"],[57,28,51,26],[58,12,52,10,"email"],[58,17,52,15],[58,19,52,17,"data"],[58,23,52,21],[58,24,52,22,"user"],[58,28,52,26],[58,29,52,27,"email"],[58,34,52,32],[58,38,52,36,"email"],[59,10,53,8],[60,8,54,6],[60,9,54,7],[61,6,55,4],[62,6,57,4],[62,13,57,11],[63,8,57,13,"success"],[63,15,57,20],[63,17,57,22],[63,22,57,27],[64,8,57,29,"error"],[64,13,57,34],[64,15,57,36],[65,6,57,63],[65,7,57,64],[66,4,58,2],[66,5,58,3],[66,6,58,4],[66,13,58,11,"error"],[66,18,58,21],[66,20,58,23],[67,6,59,4],[67,13,59,11],[68,8,59,13,"success"],[68,15,59,20],[68,17,59,22],[68,22,59,27],[69,8,59,29,"error"],[69,13,59,34],[69,15,59,36,"error"],[69,20,59,41],[69,21,59,42,"message"],[69,28,59,49],[69,32,59,53],[70,6,59,69],[70,7,59,70],[71,4,60,2],[72,2,61,0],[74,2,63,0],[75,0,64,0],[76,0,65,0],[77,2,66,7],[77,17,66,22,"signIn"],[77,23,66,28,"signIn"],[77,24,66,29,"email"],[77,29,66,42],[77,31,66,44,"password"],[77,39,66,60],[77,41,66,83],[78,4,67,2],[78,8,67,6],[79,6,68,4],[79,12,68,10],[80,8,68,12,"data"],[80,12,68,16],[81,8,68,18,"error"],[82,6,68,24],[82,7,68,25],[82,10,68,28],[82,16,68,34,"supabase"],[82,31,68,42],[82,32,68,42,"supabase"],[82,40,68,42],[82,41,68,43,"auth"],[82,45,68,47],[82,46,68,48,"signInWithPassword"],[82,64,68,66],[82,65,68,67],[83,8,69,6,"email"],[83,13,69,11],[84,8,70,6,"password"],[85,6,71,4],[85,7,71,5],[85,8,71,6],[86,6,73,4],[86,10,73,8,"error"],[86,15,73,13],[86,17,73,15],[87,8,74,6],[88,8,75,6],[88,12,75,10,"error"],[88,17,75,15],[88,18,75,16,"message"],[88,25,75,23],[88,26,75,24,"includes"],[88,34,75,32],[88,35,75,33],[88,56,75,54],[88,57,75,55],[88,61,75,59,"error"],[88,66,75,64],[88,67,75,65,"message"],[88,74,75,72],[88,75,75,73,"includes"],[88,83,75,81],[88,84,75,82],[88,105,75,103],[88,106,75,104],[88,108,75,106],[89,10,76,8],[89,17,76,15],[90,12,77,10,"success"],[90,19,77,17],[90,21,77,19],[90,26,77,24],[91,12,78,10,"error"],[91,17,78,15],[91,19,78,17],[92,10,79,8],[92,11,79,9],[93,8,80,6],[94,8,81,6],[94,15,81,13],[95,10,81,15,"success"],[95,17,81,22],[95,19,81,24],[95,24,81,29],[96,10,81,31,"error"],[96,15,81,36],[96,17,81,38,"error"],[96,22,81,43],[96,23,81,44,"message"],[97,8,81,52],[97,9,81,53],[98,6,82,4],[99,6,84,4],[99,10,84,8,"data"],[99,14,84,12],[99,15,84,13,"user"],[99,19,84,17],[99,21,84,19],[100,8,85,6],[100,15,85,13],[101,10,86,8,"success"],[101,17,86,15],[101,19,86,17],[101,23,86,21],[102,10,87,8,"user"],[102,14,87,12],[102,16,87,14],[103,12,88,10,"id"],[103,14,88,12],[103,16,88,14,"data"],[103,20,88,18],[103,21,88,19,"user"],[103,25,88,23],[103,26,88,24,"id"],[103,28,88,26],[104,12,89,10,"email"],[104,17,89,15],[104,19,89,17,"data"],[104,23,89,21],[104,24,89,22,"user"],[104,28,89,26],[104,29,89,27,"email"],[104,34,89,32],[104,38,89,36,"email"],[105,10,90,8],[106,8,91,6],[106,9,91,7],[107,6,92,4],[108,6,94,4],[108,13,94,11],[109,8,94,13,"success"],[109,15,94,20],[109,17,94,22],[109,22,94,27],[110,8,94,29,"error"],[110,13,94,34],[110,15,94,36],[111,6,94,56],[111,7,94,57],[112,4,95,2],[112,5,95,3],[112,6,95,4],[112,13,95,11,"error"],[112,18,95,21],[112,20,95,23],[113,6,96,4],[113,13,96,11],[114,8,96,13,"success"],[114,15,96,20],[114,17,96,22],[114,22,96,27],[115,8,96,29,"error"],[115,13,96,34],[115,15,96,36,"error"],[115,20,96,41],[115,21,96,42,"message"],[115,28,96,49],[115,32,96,53],[116,6,96,69],[116,7,96,70],[117,4,97,2],[118,2,98,0],[120,2,100,0],[121,0,101,0],[122,0,102,0],[123,2,103,7],[123,17,103,22,"signOut"],[123,24,103,29,"signOut"],[123,25,103,29],[123,27,103,47],[124,4,104,2],[124,10,104,8,"supabase"],[124,25,104,16],[124,26,104,16,"supabase"],[124,34,104,16],[124,35,104,17,"auth"],[124,39,104,21],[124,40,104,22,"signOut"],[124,47,104,29],[124,48,104,30],[124,49,104,31],[125,2,105,0],[127,2,107,0],[128,0,108,0],[129,0,109,0],[130,2,110,7],[130,17,110,22,"getSession"],[130,27,110,32,"getSession"],[130,28,110,32],[130,30,110,57],[131,4,111,2],[131,8,111,6],[132,6,112,4],[132,12,112,10],[133,8,112,12,"data"],[133,12,112,16],[133,14,112,18],[134,10,112,20,"session"],[135,8,112,28],[136,6,112,30],[136,7,112,31],[136,10,112,34],[136,16,112,40,"supabase"],[136,31,112,48],[136,32,112,48,"supabase"],[136,40,112,48],[136,41,112,49,"auth"],[136,45,112,53],[136,46,112,54,"getSession"],[136,56,112,64],[136,57,112,65],[136,58,112,66],[137,6,114,4],[137,10,114,8,"session"],[137,17,114,15],[137,19,114,17,"user"],[137,23,114,21],[137,25,114,23],[138,8,115,6],[138,15,115,13],[139,10,116,8,"id"],[139,12,116,10],[139,14,116,12,"session"],[139,21,116,19],[139,22,116,20,"user"],[139,26,116,24],[139,27,116,25,"id"],[139,29,116,27],[140,10,117,8,"email"],[140,15,117,13],[140,17,117,15,"session"],[140,24,117,22],[140,25,117,23,"user"],[140,29,117,27],[140,30,117,28,"email"],[140,35,117,33],[140,39,117,37],[141,8,118,6],[141,9,118,7],[142,6,119,4],[143,6,121,4],[143,13,121,11],[143,17,121,15],[144,4,122,2],[144,5,122,3],[144,6,122,4],[144,13,122,11,"error"],[144,18,122,16],[144,20,122,18],[145,6,123,4],[145,13,123,11],[145,17,123,15],[146,4,124,2],[147,2,125,0],[149,2,127,0],[150,0,128,0],[151,0,129,0],[152,2,130,7],[152,11,130,16,"onAuthStateChange"],[152,28,130,33,"onAuthStateChange"],[152,29,130,34,"callback"],[152,37,130,71],[152,39,130,73],[153,4,131,2],[153,11,131,9,"supabase"],[153,26,131,17],[153,27,131,17,"supabase"],[153,35,131,17],[153,36,131,18,"auth"],[153,40,131,22],[153,41,131,23,"onAuthStateChange"],[153,58,131,40],[153,59,131,41],[153,60,131,42,"event"],[153,65,131,47],[153,67,131,49,"session"],[153,74,131,56],[153,79,131,61],[154,6,132,4],[154,10,132,8,"session"],[154,17,132,15],[154,19,132,17,"user"],[154,23,132,21],[154,25,132,23],[155,8,133,6,"callback"],[155,16,133,14],[155,17,133,15],[156,10,134,8,"id"],[156,12,134,10],[156,14,134,12,"session"],[156,21,134,19],[156,22,134,20,"user"],[156,26,134,24],[156,27,134,25,"id"],[156,29,134,27],[157,10,135,8,"email"],[157,15,135,13],[157,17,135,15,"session"],[157,24,135,22],[157,25,135,23,"user"],[157,29,135,27],[157,30,135,28,"email"],[157,35,135,33],[157,39,135,37],[158,8,136,6],[158,9,136,7],[158,10,136,8],[159,6,137,4],[159,7,137,5],[159,13,137,11],[160,8,138,6,"callback"],[160,16,138,14],[160,17,138,15],[160,21,138,19],[160,22,138,20],[161,6,139,4],[162,4,140,2],[162,5,140,3],[162,6,140,4],[163,2,141,0],[164,0,141,1],[164,3]],"functionMap":{"names":["<global>","signUp","signIn","signOut","getSession","onAuthStateChange","supabase.auth.onAuthStateChange$argument_0"],"mappings":"AAA;OCgB;CD4C;OEK;CFgC;OGK;CHE;OIK;CJe;OKK;yCCC;GDS;CLC"},"hasCjsExports":false},"type":"js/module"}]}